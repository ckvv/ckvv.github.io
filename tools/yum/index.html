<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="yum是种软件包管理器，yum 主要功能是更方便的添加/删除/更新RPM 包，自动解决包的倚赖性问题，便于管理大量系统的更新问题。yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性。
配置#    yum 的配置文件分为两部分：main 和repository
main 部分定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。 repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。 yum.conf 文件一般位于/etc目录下，一般其中只包含main部分的配置选项。
# cat /etc/yum.conf
yum.conf
除了上述之外，还有一些可以添加的选项，如：
　exclude=selinux*　// 排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。 gpgcheck=1　// 有1和0两个选择，分别代表是否是否进行gpg(GNU Private Guard) 校验，以确定rpm 包的来源是有效和安全的。这个选项如果设置在[main]部分，则对每个repository 都有效。默认值为0。
1. 配置本地yum源
(1) 挂载光盘
mount /dev/cdrom /mnt/ (2)配置本地yum源
查看/etc/yum.repo.d/下有四个文件

CentOS-Base.repo 是yum 网络源的配置文件
CentOS-Media.repo 是yum 本地源的配置文件
修改CentOS-Media.repo文件
#cat /etc/yum.repo.d/CentOS-Media.repo
CentOS-Media.repo
在baseurl 中修改第2个路径为 /mnt/（即为光盘挂载点）
将enabled=0改为1
(3)禁用网络yum源
将CentOS-Base.repo 重命名为CentOS-Base.repo.bak,否则会先在网络源中寻找适合的包，改名之后直接从本地源读取。 (4) 执行yum命令测试
yum install bind 关于repo的格式#    所有repository 服务器设置都应该遵循如下格式："><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="yum"><meta name=twitter:description content="yum是种软件包管理器，yum 主要功能是更方便的添加/删除/更新RPM 包，自动解决包的倚赖性问题，便于管理大量系统的更新问题。yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性。
配置#    yum 的配置文件分为两部分：main 和repository
main 部分定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。 repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。 yum.conf 文件一般位于/etc目录下，一般其中只包含main部分的配置选项。
# cat /etc/yum.conf
yum.conf
除了上述之外，还有一些可以添加的选项，如：
　exclude=selinux*　// 排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。 gpgcheck=1　// 有1和0两个选择，分别代表是否是否进行gpg(GNU Private Guard) 校验，以确定rpm 包的来源是有效和安全的。这个选项如果设置在[main]部分，则对每个repository 都有效。默认值为0。
1. 配置本地yum源
(1) 挂载光盘
mount /dev/cdrom /mnt/ (2)配置本地yum源
查看/etc/yum.repo.d/下有四个文件

CentOS-Base.repo 是yum 网络源的配置文件
CentOS-Media.repo 是yum 本地源的配置文件
修改CentOS-Media.repo文件
#cat /etc/yum.repo.d/CentOS-Media.repo
CentOS-Media.repo
在baseurl 中修改第2个路径为 /mnt/（即为光盘挂载点）
将enabled=0改为1
(3)禁用网络yum源
将CentOS-Base.repo 重命名为CentOS-Base.repo.bak,否则会先在网络源中寻找适合的包，改名之后直接从本地源读取。 (4) 执行yum命令测试
yum install bind 关于repo的格式#    所有repository 服务器设置都应该遵循如下格式："><meta property="og:title" content="yum"><meta property="og:description" content="yum是种软件包管理器，yum 主要功能是更方便的添加/删除/更新RPM 包，自动解决包的倚赖性问题，便于管理大量系统的更新问题。yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性。
配置#    yum 的配置文件分为两部分：main 和repository
main 部分定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。 repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。 yum.conf 文件一般位于/etc目录下，一般其中只包含main部分的配置选项。
# cat /etc/yum.conf
yum.conf
除了上述之外，还有一些可以添加的选项，如：
　exclude=selinux*　// 排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。 gpgcheck=1　// 有1和0两个选择，分别代表是否是否进行gpg(GNU Private Guard) 校验，以确定rpm 包的来源是有效和安全的。这个选项如果设置在[main]部分，则对每个repository 都有效。默认值为0。
1. 配置本地yum源
(1) 挂载光盘
mount /dev/cdrom /mnt/ (2)配置本地yum源
查看/etc/yum.repo.d/下有四个文件

CentOS-Base.repo 是yum 网络源的配置文件
CentOS-Media.repo 是yum 本地源的配置文件
修改CentOS-Media.repo文件
#cat /etc/yum.repo.d/CentOS-Media.repo
CentOS-Media.repo
在baseurl 中修改第2个路径为 /mnt/（即为光盘挂载点）
将enabled=0改为1
(3)禁用网络yum源
将CentOS-Base.repo 重命名为CentOS-Base.repo.bak,否则会先在网络源中寻找适合的包，改名之后直接从本地源读取。 (4) 执行yum命令测试
yum install bind 关于repo的格式#    所有repository 服务器设置都应该遵循如下格式："><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/tools/yum/"><meta property="article:published_time" content="2021-07-09T15:37:56+08:00"><meta property="article:modified_time" content="2021-07-09T15:37:56+08:00"><title>yum · CK's Blog</title><link rel=canonical href=https://chenkai.life/tools/yum/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.ffed55576b1fe8cd1a532c3c9691900c09813ce5a8e0fbf58a6e377169305cf3.css integrity="sha256-/+1VV2sf6M0aUyw8lpGQDAmBPOWo4Pv1im43cWkwXPM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.72.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/index.xml>RSS</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=google>Google</button>
<button class=search-btn data-type=github>GitHub</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/tools/yum/>yum</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title target=_blank href=https://github.com/chenkai0520/chenkai0520.github.io/edit/main/content/tools/yum.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2021-07-09T15:37:56+08:00>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/tool/>tool</a></span></div></div><p>yum是种软件包管理器，yum 主要功能是更方便的添加/删除/更新RPM 包，自动解决包的倚赖性问题，便于管理大量系统的更新问题。yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性。</p><h3 id=配置httpswwwcnblogscomzhichaomap7533247html399031509>配置<a href=https://www.cnblogs.com/zhichaoma/p/7533247.html#399031509>#</a>
<a class=heading-link href=#%e9%85%8d%e7%bd%aehttpswwwcnblogscomzhichaomap7533247html399031509><i class="fa fa-link" aria-hidden=true></i></a></h3><p>yum 的配置文件分为两部分：main 和repository</p><p>main 部分定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。
repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。
yum.conf 文件一般位于/etc目录下，一般其中只包含main部分的配置选项。</p><p># cat /etc/yum.conf</p><p>yum.conf</p><p>除了上述之外，还有一些可以添加的选项，如：</p><p>　exclude=selinux*　　// 排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。
　gpgcheck=1　　// 有1和0两个选择，分别代表是否是否进行gpg(GNU Private Guard) 校验，以确定rpm 包的来源是有效和安全的。这个选项如果设置在[main]部分，则对每个repository 都有效。默认值为0。</p><p><strong>1. 配置本地yum源</strong></p><p>(1) 挂载光盘</p><pre><code>mount /dev/cdrom /mnt/
</code></pre><p>(2)配置本地yum源</p><p>查看/etc/yum.repo.d/下有四个文件</p><p><a href=https://images2017.cnblogs.com/blog/1199372/201709/1199372-20170916213951047-540738901.png><img src=https://images2017.cnblogs.com/blog/1199372/201709/1199372-20170916213951047-540738901.png alt=img></a></p><p>CentOS-Base.repo 是yum 网络源的配置文件</p><p>CentOS-Media.repo 是yum 本地源的配置文件</p><p>修改CentOS-Media.repo文件</p><p>#cat /etc/yum.repo.d/CentOS-Media.repo</p><p>CentOS-Media.repo</p><p>在baseurl 中修改第2个路径为 /mnt/（即为光盘挂载点）</p><p>将enabled=0改为1</p><p>(3)禁用网络yum源</p><p>将CentOS-Base.repo 重命名为CentOS-Base.repo.bak,否则会先在网络源中寻找适合的包，改名之后直接从本地源读取。
(4) 执行yum命令测试</p><pre><code>yum install bind
</code></pre><h3 id=关于repo的格式httpswwwcnblogscomzhichaomap7533247html3576327658>关于repo的格式<a href=https://www.cnblogs.com/zhichaoma/p/7533247.html#3576327658>#</a>
<a class=heading-link href=#%e5%85%b3%e4%ba%8erepo%e7%9a%84%e6%a0%bc%e5%bc%8fhttpswwwcnblogscomzhichaomap7533247html3576327658><i class="fa fa-link" aria-hidden=true></i></a></h3><p>所有repository 服务器设置都应该遵循如下格式：</p><pre><code>[serverid]
name=Some name for this server
baseurl=url://path/to/repository/
</code></pre><ul><li>serverid 是用于区别各个不同的repository，必须有一个独一无二的名称；</li><li>name 是对repository 的描述，支持像𝑟𝑒𝑙𝑒𝑎𝑠𝑒𝑣𝑒𝑟releaseverbasearch这样的变量；</li><li>baseurl 是服务器设置中最重要的部分，只有设置正确，才能从上面获取软件。它的格式是：</li></ul><pre><code>baseurl=url://server1/path/to/repository/
　　　　 url://server2/path/to/repository/
　　　　 url://server3/path/to/repository/
</code></pre><p>其中url 支持的协议有 http:// ftp:// file:// 三种。baseurl 后可以跟多个url，你可以自己改为速度比较快的镜像站，但baseurl 只能有一个，也就是说不能像如下格式：</p><pre><code>baseurl=url://server1/path/to/repository/
baseurl=url://server2/path/to/repository/
baseurl=url://server3/path/to/repository/
</code></pre><p>其中url 指向的目录必须是这个repository header 目录的上一级，它也支持𝑟𝑒𝑙𝑒𝑎𝑠𝑒𝑣𝑒𝑟releaseverbasearch 这样的变量。
url 之后可以加上多个选项，如gpgcheck、exclude、failovermethod 等，比如：</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>[updates-released]
name=Fedora Core $releasever - $basearch - Released Updates
baseurl=http://download.atrpms.net/mirrors/fedoracore/updates/$releasever/$basearch
　　　　 http://redhat.linux.ee/pub/fedora/linux/core/updates/$releasever/$basearch
　　　　 http://fr2.rpmfind.net/linux/fedora/core/updates/$releasever/$basearch
gpgcheck=1
exclude=gaim
failovermethod=priority
</code></pre><p><img src=https://common.cnblogs.com/images/copycode.gif alt></p><p>其中gpgcheck，exclude 的含义和[main] 部分相同，但只对此服务器起作用，failovermethode 有两个选项roundrobin 和priority，意思分别是有多个url可供选择时，yum 选择的次序，roundrobin 是随机选择，如果连 ·接失败则使用下一个，依次循环，priority 则根据url 的次序从第一个开始。如果不指明，默认是roundrobin。</p><h3 id=配置阿里云yum源httpswwwcnblogscomzhichaomap7533247html166032900>配置阿里云YUM源<a href=https://www.cnblogs.com/zhichaoma/p/7533247.html#166032900>#</a>
<a class=heading-link href=#%e9%85%8d%e7%bd%ae%e9%98%bf%e9%87%8c%e4%ba%91yum%e6%ba%90httpswwwcnblogscomzhichaomap7533247html166032900><i class="fa fa-link" aria-hidden=true></i></a></h3><p>阿里云Linux安装镜像源地址：
　　<a href=http://mirrors.aliyun.com/>http://mirrors.aliyun.com/</a>
　　http://mirrors.aliyun.com/repo/</p><p>CentOS系统更换软件安装源
第一步：备份你的原镜像文件，以免出错后可以恢复。</p><pre><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup 
</code></pre><p>第二步：下载新的CentOS-Base.repo 到/etc/yum.repos.d/</p><pre><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo 
</code></pre><p>第三步：运行yum makecache生成缓存</p><pre><code>yum clean all　　//清理缓存
yum makecache　　//更新缓存
</code></pre><h3 id=yum工具的使用httpswwwcnblogscomzhichaomap7533247html2542095789>yum工具的使用<a href=https://www.cnblogs.com/zhichaoma/p/7533247.html#2542095789>#</a>
<a class=heading-link href=#yum%e5%b7%a5%e5%85%b7%e7%9a%84%e4%bd%bf%e7%94%a8httpswwwcnblogscomzhichaomap7533247html2542095789><i class="fa fa-link" aria-hidden=true></i></a></h3><p>rpm的更新</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>检查可更新的rpm包
#yum check-update
更新所有的rpm包
#yum update
更新指定的rpm包,如更新kernel和kernel source
#yum update kernel kernel-source
大规模的版本升级,与yum update不同的是,连旧的淘汰的包也升级
#yum upgrade
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>rpm包的安装和删除</p><pre><code>安装rpm包,如xmms-mp3
#yum install xmms-mp3
删除rpm包,包括与该包有倚赖性的包
#yum remove licq
注:同时会提示删除licq-gnome,licq-qt,licq-text
</code></pre><p>yum暂存(/var/cache/yum/)的相关参数</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>清除暂存中rpm包文件
#yum clean packages
清除暂存中rpm头文件
#yum clearn headers
清除暂存中旧的rpm头文件
#yum clean oldheaders
清除暂存中旧的rpm头文件和包文件
#yum clearn 或#yum clearn all
注:相当于yum clean packages + yum clean oldheaders
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>包列表</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>列出资源库中所有可以安装或更新的rpm包
#yum list
列出资源库中特定的可以安装或更新以及已经安装的rpm包
#yum list mozilla#yum list mozilla*
注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包
列出资源库中所有可以更新的rpm包
#yum list updates
列出已经安装的所有的rpm包
#yum list installed
列出已经安装的但是不包含在资源库中的rpm包
#yum list extras
注:通过其它网站下载安装的rpm包
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>rpm包信息显示(info参数同list)</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>列出资源库中所有可以安装或更新的rpm包的信息
#yum info
列出资源库中特定的可以安装或更新以及已经安装的rpm包的信息
#yum info mozilla#yum info mozilla*
注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包的信息
列出资源库中所有可以更新的rpm包的信息
#yum info updates
列出已经安装的所有的rpm包的信息
#yum info installed
列出已经安装的但是不包含在资源库中的rpm包的信息
#yum info extras
注:通过其它网站下载安装的rpm包的信息
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>搜索rpm包</p><pre><code>搜索匹配特定字符的rpm包
#yum search mozilla
注:在rpm包名,包描述等中搜索
搜索有包含特定文件名的rpm包
#yum provides realplay 
</code></pre><p>增加资源库</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code>例如:增加rpm.livna.org作为资源库
安装Livna.org rpms GPG key
#rpm --import http://rpm.livna.org/RPM-LIVNA-GPG-KEY
检查GPG Key
# rpm -qa gpg-pubkey*
显示Key信息
#rpm -qi gpg-pubkey-a109b1ec-3f6e28d5
(注:如果要删除Key,使用#rpm -e gpg-pubkey-a109b1ec-3f6e28d5)
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>yum常用的命令</p><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><pre><code># yum install xxx            　　安装xxx软件
# yum info xxx                　 查看xxx软件的信息
# yum remove xxx        　　　　　删除软件包
# yum list                      列出软件包
# yum clean                     清除缓冲和就的包
# yum provides xxx              以xxx为关键字搜索包（提供的信息为关键字）
# yum search xxx           　　 搜索软件包（以名字为关键字）
# yum groupupdate xxx　　　　   更新xxx软件分组
# yum grouplist xxx
# yum groupremove xxx
# yum groupinfoinfo xxx
这三个都是一组为单位进行升级 列表和删除的操作。。比如 &quot;Mysql Database&quot;就是一个组会同时操作相关的所有软件包；
# yum update                  系统升级
# yum list available          列出所有升级源上的包；
# yum list updates            列出所有升级源上的可以更新包；
# yum list installed          列出已经安装的包；
# yun update kernel           升级内核；
</code></pre><p><a href><img src=https://common.cnblogs.com/images/copycode.gif alt=复制代码></a></p><p>搭建内网YUM仓库：http://www.cnblogs.com/zhichaoma/p/7581957.html</p><p>更多使用请参考：http://man.linuxde.net/yum</p><div id=vcomments></div></article></section></div></main><script src=/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body></html>