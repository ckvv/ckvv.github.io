<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=theme-color content="#ffffff"><meta name=color-scheme content="light dark"><meta name=description content="base64 Base64是用64个字符来表示数据的方法。Base64要求把每三个8Bit的字节转换为四个6Bit的字节，然后把6Bit再添两位高位0，组成四个8Bit的字节，也就是说，转换后的字符串理论上将要比原来的长1/3。如果要转码数据字节不是3的倍数，最后一组填充1到2个0字节，并在最后编码完成后在结尾添加1到2个=号。 转换后，我们每个字节范围为[00000000-00111111],所以我们可以用一个64码表来得到我们想要的字符串（也就是最终的Base64编码）标准的Base64用[A-Z,a-z,0-9,+,/]64个字符编码。
编码 深入了解base64前，我们需要先了解编码。编码是信息从一种形式或格式转换为另一种形式的过程。计算机中，所有的数据在存储和运算时都使用二进制示，n位二进制组合成2的n次方个不同的信息，给每个信息规定一个具体码组，这种过程叫编码。而具体用哪些二进制数字表示哪个符号，每个人都可以约定自己的一套编码。
如常用的ASCII是由美国国家标准学会制定的一种单字节字符编码，标准ASCII码使用7位二进制数（剩下的1位二进制为0）来表示所有的大写和小写字母，数字0到9、标点符号。在有的语言中128个符号是不够的，有些编码方案利用字节中闲置的最高位编入新的符号，有的利用两个（GBK等）或更多字节（utf-32等）表示一个符号（汉字）
Base64编码 base64编码过程：
ascii码s133对应的编码115 49 51 51 在内存2进制表示： 01110011 00110001 00110011 00110011 每三组分为6Bit四组011100 110011 000100 110011 001100 110000 000000 000000 高位补0得到 00011100 00110011 00000100 00110011 00001100 00110000 00000000 00000000 对应十进制 28 51 4 51 12 48 0 0 查对照表 生成base64码czEzMw== base64解码过程：
base64编码过程逆向即为解码
javascript代码实现 Base64 = { _table: [ 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/' ], _getReg: function () { return RegExp(`^[${this."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Base64原理及实现"><meta name=twitter:description content="base64 Base64是用64个字符来表示数据的方法。Base64要求把每三个8Bit的字节转换为四个6Bit的字节，然后把6Bit再添两位高位0，组成四个8Bit的字节，也就是说，转换后的字符串理论上将要比原来的长1/3。如果要转码数据字节不是3的倍数，最后一组填充1到2个0字节，并在最后编码完成后在结尾添加1到2个=号。 转换后，我们每个字节范围为[00000000-00111111],所以我们可以用一个64码表来得到我们想要的字符串（也就是最终的Base64编码）标准的Base64用[A-Z,a-z,0-9,+,/]64个字符编码。
编码 深入了解base64前，我们需要先了解编码。编码是信息从一种形式或格式转换为另一种形式的过程。计算机中，所有的数据在存储和运算时都使用二进制示，n位二进制组合成2的n次方个不同的信息，给每个信息规定一个具体码组，这种过程叫编码。而具体用哪些二进制数字表示哪个符号，每个人都可以约定自己的一套编码。
如常用的ASCII是由美国国家标准学会制定的一种单字节字符编码，标准ASCII码使用7位二进制数（剩下的1位二进制为0）来表示所有的大写和小写字母，数字0到9、标点符号。在有的语言中128个符号是不够的，有些编码方案利用字节中闲置的最高位编入新的符号，有的利用两个（GBK等）或更多字节（utf-32等）表示一个符号（汉字）
Base64编码 base64编码过程：
ascii码s133对应的编码115 49 51 51 在内存2进制表示： 01110011 00110001 00110011 00110011 每三组分为6Bit四组011100 110011 000100 110011 001100 110000 000000 000000 高位补0得到 00011100 00110011 00000100 00110011 00001100 00110000 00000000 00000000 对应十进制 28 51 4 51 12 48 0 0 查对照表 生成base64码czEzMw== base64解码过程：
base64编码过程逆向即为解码
javascript代码实现 Base64 = { _table: [ 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/' ], _getReg: function () { return RegExp(`^[${this."><meta property="og:title" content="Base64原理及实现"><meta property="og:description" content="base64 Base64是用64个字符来表示数据的方法。Base64要求把每三个8Bit的字节转换为四个6Bit的字节，然后把6Bit再添两位高位0，组成四个8Bit的字节，也就是说，转换后的字符串理论上将要比原来的长1/3。如果要转码数据字节不是3的倍数，最后一组填充1到2个0字节，并在最后编码完成后在结尾添加1到2个=号。 转换后，我们每个字节范围为[00000000-00111111],所以我们可以用一个64码表来得到我们想要的字符串（也就是最终的Base64编码）标准的Base64用[A-Z,a-z,0-9,+,/]64个字符编码。
编码 深入了解base64前，我们需要先了解编码。编码是信息从一种形式或格式转换为另一种形式的过程。计算机中，所有的数据在存储和运算时都使用二进制示，n位二进制组合成2的n次方个不同的信息，给每个信息规定一个具体码组，这种过程叫编码。而具体用哪些二进制数字表示哪个符号，每个人都可以约定自己的一套编码。
如常用的ASCII是由美国国家标准学会制定的一种单字节字符编码，标准ASCII码使用7位二进制数（剩下的1位二进制为0）来表示所有的大写和小写字母，数字0到9、标点符号。在有的语言中128个符号是不够的，有些编码方案利用字节中闲置的最高位编入新的符号，有的利用两个（GBK等）或更多字节（utf-32等）表示一个符号（汉字）
Base64编码 base64编码过程：
ascii码s133对应的编码115 49 51 51 在内存2进制表示： 01110011 00110001 00110011 00110011 每三组分为6Bit四组011100 110011 000100 110011 001100 110000 000000 000000 高位补0得到 00011100 00110011 00000100 00110011 00001100 00110000 00000000 00000000 对应十进制 28 51 4 51 12 48 0 0 查对照表 生成base64码czEzMw== base64解码过程：
base64编码过程逆向即为解码
javascript代码实现 Base64 = { _table: [ 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/' ], _getReg: function () { return RegExp(`^[${this."><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/posts/base64/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-19T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-05T10:40:12+08:00"><title>Base64原理及实现 · CK's Blog</title><link rel=canonical href=https://chenkai.life/posts/base64/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.d12542c00c198b6a07ca9ea5981102805aecab0f5dfd5e3273d8c179088712c4.css integrity="sha256-0SVCwAwZi2oHyp6lmBECgFrsqw9d/V4yc9jBeQiHEsQ=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicon.ico><link rel=apple-touch-icon type=image/png sizes=256x256 href=/images/favicon-512x512.png><meta name=generator content="Hugo 0.119.0"><link rel=manifest href=/manifest.webmanifest></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><details id=table-of-contents-wapper><summary><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></summary></details><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/marks/>Marks</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/ckvv/ckvv.github.io/tree/main/content>Create</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=github>GitHub</button>
<button class=search-btn data-type=google>Google</button></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://chenkai.life/posts/base64/>Base64原理及实现</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title rel=noopener target=_blank href=https://github.com/ckvv/ckvv.github.io/edit/main/content/posts/base64.md>编辑</a></div></div><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2019-02-19T00:00:00Z>2019-02-19</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/base64/>Base64</a></span></div></div></header><div><h2 id=base64>base64
<a class=heading-link href=#base64><i class="fa fa-link" aria-hidden=true></i></a></h2><p><strong>Base64是用64个字符来表示数据的方法</strong>。Base64要求把每三个8Bit的字节转换为四个6Bit的字节，然后把6Bit再添两位高位0，组成四个8Bit的字节，也就是说，转换后的字符串理论上将要比原来的长1/3。如果要转码数据字节不是3的倍数，最后一组填充1到2个0字节，并在最后编码完成后在结尾添加1到2个=号。
转换后，我们每个字节范围为[00000000-00111111],所以我们可以用一个64码表来得到我们想要的字符串（也就是最终的Base64编码）标准的Base64用<code>[A-Z,a-z,0-9,+,/]</code>64个字符编码。</p><h2 id=编码>编码
<a class=heading-link href=#%e7%bc%96%e7%a0%81><i class="fa fa-link" aria-hidden=true></i></a></h2><p>深入了解base64前，我们需要先了解编码。编码是信息从一种形式或格式转换为另一种形式的过程。计算机中，所有的数据在存储和运算时都使用二进制示，n位二进制组合成2的n次方个不同的信息，给每个信息规定一个具体码组，这种过程叫编码。而具体用哪些二进制数字表示哪个符号，每个人都可以约定自己的一套编码。</p><p>如常用的ASCII是由美国国家标准学会制定的一种单字节字符编码，标准ASCII码使用7位二进制数（剩下的1位二进制为0）来表示所有的大写和小写字母，数字0到9、标点符号。在有的语言中128个符号是不够的，有些编码方案利用字节中闲置的最高位编入新的符号，有的利用两个（GBK等）或更多字节（utf-32等）表示一个符号（汉字）</p><h2 id=base64编码>Base64编码
<a class=heading-link href=#base64%e7%bc%96%e7%a0%81><i class="fa fa-link" aria-hidden=true></i></a></h2><p>base64编码过程：</p><ul><li>ascii码<code>s133</code>对应的编码<code>115 49 51 51</code></li><li>在内存2进制表示： <code>01110011 00110001 00110011 00110011</code></li><li>每三组分为6Bit四组<code>011100 110011 000100 110011 001100 110000 000000 000000</code></li><li>高位补0得到 <code>00011100 00110011 00000100 00110011 00001100 00110000 00000000 00000000</code></li><li>对应十进制 <code>28 51 4 51 12 48 0 0</code></li><li>查对照表 生成base64码<code>czEzMw==</code></li></ul><p>base64解码过程：</p><p>base64编码过程逆向即为解码</p><h2 id=javascript代码实现>javascript代码实现
<a class=heading-link href=#javascript%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0><i class="fa fa-link" aria-hidden=true></i></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>Base64</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>_table</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;A&#39;</span>, <span style=color:#e6db74>&#39;B&#39;</span>, <span style=color:#e6db74>&#39;C&#39;</span>, <span style=color:#e6db74>&#39;D&#39;</span>, <span style=color:#e6db74>&#39;E&#39;</span>, <span style=color:#e6db74>&#39;F&#39;</span>, <span style=color:#e6db74>&#39;G&#39;</span>, <span style=color:#e6db74>&#39;H&#39;</span>, <span style=color:#e6db74>&#39;I&#39;</span>, <span style=color:#e6db74>&#39;J&#39;</span>, <span style=color:#e6db74>&#39;K&#39;</span>, <span style=color:#e6db74>&#39;L&#39;</span>, <span style=color:#e6db74>&#39;M&#39;</span>, <span style=color:#e6db74>&#39;N&#39;</span>, <span style=color:#e6db74>&#39;O&#39;</span>, <span style=color:#e6db74>&#39;P&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Q&#39;</span>, <span style=color:#e6db74>&#39;R&#39;</span>, <span style=color:#e6db74>&#39;S&#39;</span>, <span style=color:#e6db74>&#39;T&#39;</span>, <span style=color:#e6db74>&#39;U&#39;</span>, <span style=color:#e6db74>&#39;V&#39;</span>, <span style=color:#e6db74>&#39;W&#39;</span>, <span style=color:#e6db74>&#39;X&#39;</span>, <span style=color:#e6db74>&#39;Y&#39;</span>, <span style=color:#e6db74>&#39;Z&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#e6db74>&#39;b&#39;</span>, <span style=color:#e6db74>&#39;c&#39;</span>, <span style=color:#e6db74>&#39;d&#39;</span>, <span style=color:#e6db74>&#39;e&#39;</span>, <span style=color:#e6db74>&#39;f&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;g&#39;</span>, <span style=color:#e6db74>&#39;h&#39;</span>, <span style=color:#e6db74>&#39;i&#39;</span>, <span style=color:#e6db74>&#39;j&#39;</span>, <span style=color:#e6db74>&#39;k&#39;</span>, <span style=color:#e6db74>&#39;l&#39;</span>, <span style=color:#e6db74>&#39;m&#39;</span>, <span style=color:#e6db74>&#39;n&#39;</span>, <span style=color:#e6db74>&#39;o&#39;</span>, <span style=color:#e6db74>&#39;p&#39;</span>, <span style=color:#e6db74>&#39;q&#39;</span>, <span style=color:#e6db74>&#39;r&#39;</span>, <span style=color:#e6db74>&#39;s&#39;</span>, <span style=color:#e6db74>&#39;t&#39;</span>, <span style=color:#e6db74>&#39;u&#39;</span>, <span style=color:#e6db74>&#39;v&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;w&#39;</span>, <span style=color:#e6db74>&#39;x&#39;</span>, <span style=color:#e6db74>&#39;y&#39;</span>, <span style=color:#e6db74>&#39;z&#39;</span>, <span style=color:#e6db74>&#39;0&#39;</span>, <span style=color:#e6db74>&#39;1&#39;</span>, <span style=color:#e6db74>&#39;2&#39;</span>, <span style=color:#e6db74>&#39;3&#39;</span>, <span style=color:#e6db74>&#39;4&#39;</span>, <span style=color:#e6db74>&#39;5&#39;</span>, <span style=color:#e6db74>&#39;6&#39;</span>, <span style=color:#e6db74>&#39;7&#39;</span>, <span style=color:#e6db74>&#39;8&#39;</span>, <span style=color:#e6db74>&#39;9&#39;</span>, <span style=color:#e6db74>&#39;+&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>_getReg</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> RegExp(<span style=color:#e6db74>`^[</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>]+={0,2}$`</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>encode</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>bin</span>) {
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>codes</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>binLength</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>un</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>binLength</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>binLength</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>c</span> <span style=color:#f92672>|=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>8</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>c</span> <span style=color:#f92672>|=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>//0x3f代表16进制数3F即0011 1111
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>18</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>12</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>un</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>binLength</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>18</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>12</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;=&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;=&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>un</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>binLength</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>c</span> <span style=color:#f92672>|=</span> <span style=color:#a6e22e>bin</span>[<span style=color:#a6e22e>binLength</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>8</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>18</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>12</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>[<span style=color:#a6e22e>c</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>]);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;=&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>codes</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>decode</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>base64Str</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bin</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>base64StrLen</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_getReg</span>().<span style=color:#a6e22e>test</span>(<span style=color:#a6e22e>base64Str</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#e6db74>&#34;Base64编码格式错误&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>base64StrLen</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>!==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#e6db74>&#34;Base64编码长度错误&#34;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>eqCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>base64StrLen</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#e6db74>&#39;=&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>base64StrLen</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> [<span style=color:#a6e22e>c1</span>, <span style=color:#a6e22e>c2</span>, <span style=color:#a6e22e>c3</span>, <span style=color:#a6e22e>c4</span>] <span style=color:#f92672>=</span> [<span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>charAt</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>3</span>), <span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>charAt</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span>), <span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>charAt</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>base64Str</span>.<span style=color:#a6e22e>charAt</span>(<span style=color:#a6e22e>i</span>)];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>c1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>c2</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>c3</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;=&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>c4</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;=&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>c3</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>c4</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>c3</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;=&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>c4</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;=&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_table</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>c3</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>c3</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;=&#39;</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>code</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>//0xff即11111111
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>code</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>16</span>);
</span></span><span style=display:flex><span>            <span style=color:#75715e>//取得低八位
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>code</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>8</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0xff</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>code</span> <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0xff</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>eqCount</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>bin</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>bin</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`1!@#$%^ghghna三个卡就能`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ba</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Base64</span>.<span style=color:#a6e22e>encode</span>(<span style=color:#a6e22e>Buffer</span>.<span style=color:#a6e22e>from</span>(<span style=color:#a6e22e>str</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`编码前:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>str</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>); <span style=color:#75715e>//1!@#$%^ghghna三个卡就能
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`编码后:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>ba</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>); <span style=color:#75715e>//MSFAIyQlXmdoZ2huYeS4ieS4quWNoeWwseiDvQ==
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`解码:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>Buffer</span>.<span style=color:#a6e22e>from</span>(<span style=color:#a6e22e>Base64</span>.<span style=color:#a6e22e>decode</span>(<span style=color:#a6e22e>ba</span>)).<span style=color:#a6e22e>toString</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>); <span style=color:#75715e>//1!@#$%^ghghna三个卡就能
</span></span></span></code></pre></div></div><footer></footer><div id=cusdis_thread data-host=https://cusdis.com data-app-id=c2b015f9-9a4b-4997-b66f-f9c6ca26ebdd data-page-id=3e599c58da14dafead5637ad7b1edd05 data-page-url=https://chenkai.life/posts/base64/ data-page-title=Base64原理及实现 data-iframe=/js/cusdis/iframe.umd.js data-style=/js/cusdis/style.css></div></article></section></div></main><script src=/js/coder.min.cb0c595e02234420f3ad3886bf4a9bd2874d0e1e78e090138a9ef158b35aaf17.js integrity="sha256-ywxZXgIjRCDzrTiGv0qb0odNDh544JATip7xWLNarxc="></script>
<script src=/js/custom.js></script>
<script src=/js/font.min.js></script></body><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></html>