<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=Content-Language content="en"><meta name=theme-color content="#ffffff"><meta name=color-scheme content="light dark"><meta name=description content="UUID是什么 UUIDUniversally unique identifier 是一种唯一的字符串，用来标识一个设备或一个应用程序的唯一性。根据标准方法生成时，UUID 出于实用目的是唯一的。与大多数其他编号方案不同，它们的唯一性不依赖于中央注册机构或生成它们的各方之间的协调。虽然UUID 被复制的概率不是零，但它足够接近零，可以忽略不计.
UUID是固定长度128位，表示为 32 个十六进制（base-16）数字，显示在由连字符分隔的五组中，格式为 8-4-4-4-12 总共 36 个字符（32 个十六进制字符和 4 个连字符）例如：
123e4567-e89b-12d3-a456-426614174000 xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
数字的四位M是 UUID 版本（version），数字的 1 到 3 位最高有效位是NUUID的变体（variant），在示例中，M是1，N是a(10xx 2 )，这意味着这是一个version-1、variant-1 的 UUID。
变体（variant） UUID的变体（variant）字段，占1或2或3比特。RFC 4122定义了4种变体：
变体 0 (形如0xxx), 用于向后兼容已经过时的1988年开发的 Apollo 网络计算系统（NCS）1.5 UUID 格式. 变体 1 (形如10xx), 它是按照大端序作为二进制存储与传输 变体 2 (形如110x), 它是按照小端序作为二进制存储与传输 变体 3 (形如111x), 保留未使用 UUID的编码有很多种下面我只介绍Version 4 (random)，
版本（version） 对于“变体（variants）1、2，标准中定义了五个版本（versions），在特定用例中每个版本可能比其他版本更合适。版本由 M 字符串中指示。
版本1 - UUID 是根据时间和 节点ID（通常是MAC地址）生成； 版本2 - UUID是根据标识符（通常是组或用户ID）、时间和节点ID生成； 版本3、版本5 - 确定性UUID 通过散列（hashing）名字空间（namespace）标识符和名称生成； 版本4 - UUID 使用随机性或伪随机性生成。 UUID的实现 浏览器提供了(crypto."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="深入理解UUID"><meta name=twitter:description content="UUID是什么 UUIDUniversally unique identifier 是一种唯一的字符串，用来标识一个设备或一个应用程序的唯一性。根据标准方法生成时，UUID 出于实用目的是唯一的。与大多数其他编号方案不同，它们的唯一性不依赖于中央注册机构或生成它们的各方之间的协调。虽然UUID 被复制的概率不是零，但它足够接近零，可以忽略不计.
UUID是固定长度128位，表示为 32 个十六进制（base-16）数字，显示在由连字符分隔的五组中，格式为 8-4-4-4-12 总共 36 个字符（32 个十六进制字符和 4 个连字符）例如：
123e4567-e89b-12d3-a456-426614174000 xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
数字的四位M是 UUID 版本（version），数字的 1 到 3 位最高有效位是NUUID的变体（variant），在示例中，M是1，N是a(10xx 2 )，这意味着这是一个version-1、variant-1 的 UUID。
变体（variant） UUID的变体（variant）字段，占1或2或3比特。RFC 4122定义了4种变体：
变体 0 (形如0xxx), 用于向后兼容已经过时的1988年开发的 Apollo 网络计算系统（NCS）1.5 UUID 格式. 变体 1 (形如10xx), 它是按照大端序作为二进制存储与传输 变体 2 (形如110x), 它是按照小端序作为二进制存储与传输 变体 3 (形如111x), 保留未使用 UUID的编码有很多种下面我只介绍Version 4 (random)，
版本（version） 对于“变体（variants）1、2，标准中定义了五个版本（versions），在特定用例中每个版本可能比其他版本更合适。版本由 M 字符串中指示。
版本1 - UUID 是根据时间和 节点ID（通常是MAC地址）生成； 版本2 - UUID是根据标识符（通常是组或用户ID）、时间和节点ID生成； 版本3、版本5 - 确定性UUID 通过散列（hashing）名字空间（namespace）标识符和名称生成； 版本4 - UUID 使用随机性或伪随机性生成。 UUID的实现 浏览器提供了(crypto."><meta property="og:url" content="https://chenkai.life/posts/uuid-understand/"><meta property="og:site_name" content="CK's Blog"><meta property="og:title" content="深入理解UUID"><meta property="og:description" content="UUID是什么 UUIDUniversally unique identifier 是一种唯一的字符串，用来标识一个设备或一个应用程序的唯一性。根据标准方法生成时，UUID 出于实用目的是唯一的。与大多数其他编号方案不同，它们的唯一性不依赖于中央注册机构或生成它们的各方之间的协调。虽然UUID 被复制的概率不是零，但它足够接近零，可以忽略不计.
UUID是固定长度128位，表示为 32 个十六进制（base-16）数字，显示在由连字符分隔的五组中，格式为 8-4-4-4-12 总共 36 个字符（32 个十六进制字符和 4 个连字符）例如：
123e4567-e89b-12d3-a456-426614174000 xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
数字的四位M是 UUID 版本（version），数字的 1 到 3 位最高有效位是NUUID的变体（variant），在示例中，M是1，N是a(10xx 2 )，这意味着这是一个version-1、variant-1 的 UUID。
变体（variant） UUID的变体（variant）字段，占1或2或3比特。RFC 4122定义了4种变体：
变体 0 (形如0xxx), 用于向后兼容已经过时的1988年开发的 Apollo 网络计算系统（NCS）1.5 UUID 格式. 变体 1 (形如10xx), 它是按照大端序作为二进制存储与传输 变体 2 (形如110x), 它是按照小端序作为二进制存储与传输 变体 3 (形如111x), 保留未使用 UUID的编码有很多种下面我只介绍Version 4 (random)，
版本（version） 对于“变体（variants）1、2，标准中定义了五个版本（versions），在特定用例中每个版本可能比其他版本更合适。版本由 M 字符串中指示。
版本1 - UUID 是根据时间和 节点ID（通常是MAC地址）生成； 版本2 - UUID是根据标识符（通常是组或用户ID）、时间和节点ID生成； 版本3、版本5 - 确定性UUID 通过散列（hashing）名字空间（namespace）标识符和名称生成； 版本4 - UUID 使用随机性或伪随机性生成。 UUID的实现 浏览器提供了(crypto."><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-09T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-26T17:40:02+08:00"><meta property="article:tag" content="UUID"><title>深入理解UUID · CK's Blog
</title><link rel=canonical href=https://chenkai.life/posts/uuid-understand/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.d12542c00c198b6a07ca9ea5981102805aecab0f5dfd5e3273d8c179088712c4.css integrity="sha256-0SVCwAwZi2oHyp6lmBECgFrsqw9d/V4yc9jBeQiHEsQ=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicon.ico><link rel=apple-touch-icon type=image/png sizes=256x256 href=/images/favicon-512x512.png><meta name=generator content="Hugo 0.129.0"><link rel=manifest href=/manifest.webmanifest></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><details id=table-of-contents-wapper><summary><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></summary></details><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/marks/>Marks</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/ckvv/ckvv.github.io/tree/main/content>Create</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=github>GitHub</button>
<button class=search-btn data-type=google>Google</button></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://chenkai.life/posts/uuid-understand/>深入理解UUID</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title rel=noopener target=_blank href=https://github.com/ckvv/ckvv.github.io/edit/main/content/posts/uuid-understand.md>编辑</a></div></div><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg>
<time datetime=2021-07-09T00:00:00Z>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg>
<span class=tag><a href=/tags/uuid/>UUID</a></span></div></div></header><div><h1 id=uuid是什么>UUID是什么
<a class=heading-link href=#uuid%e6%98%af%e4%bb%80%e4%b9%88><i class="fa fa-link" aria-hidden=true></i></a></h1><p>UUID<a href=https://en.wikipedia.org/wiki/Universally_unique_identifier>Universally unique identifier</a> 是一种唯一的字符串，用来标识一个设备或一个应用程序的唯一性。根据标准方法生成时，UUID 出于实用目的是唯一的。与大多数其他编号方案不同，它们的唯一性不依赖于中央注册机构或生成它们的各方之间的协调。虽然UUID 被复制的概率不是零，但它足够接近零，可以忽略不计.</p><p>UUID是固定长度128位，表示为 32 个十六进制（base-16）数字，显示在由连字符分隔的五组中，格式为 8-4-4-4-12 总共 36 个字符（32 个十六进制字符和 4 个连字符）例如：</p><p><code>123e4567-e89b-12d3-a456-426614174000</code>
<code>xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx</code></p><p>数字的四位M是 UUID 版本（version），数字的 1 到 3 位最高有效位是NUUID的变体（variant），在示例中，M是1，N是a(10xx 2 )，这意味着这是一个version-1、variant-1 的 UUID。</p><h2 id=变体variant>变体（variant）
<a class=heading-link href=#%e5%8f%98%e4%bd%93variant><i class="fa fa-link" aria-hidden=true></i></a></h2><p>UUID的变体（variant）字段，占1或2或3比特。RFC 4122定义了4种变体：</p><ul><li>变体 0 (形如0xxx), 用于向后兼容已经过时的1988年开发的 Apollo 网络计算系统（NCS）1.5 UUID 格式.</li><li>变体 1 (形如10xx), 它是按照大端序作为二进制存储与传输</li><li>变体 2 (形如110x), 它是按照小端序作为二进制存储与传输</li><li>变体 3 (形如111x), 保留未使用</li></ul><p>UUID的编码有很多种下面我只介绍Version 4 (random)，</p><h2 id=版本version>版本（version）
<a class=heading-link href=#%e7%89%88%e6%9c%acversion><i class="fa fa-link" aria-hidden=true></i></a></h2><p>对于“变体（variants）1、2，标准中定义了五个版本（versions），在特定用例中每个版本可能比其他版本更合适。版本由 M 字符串中指示。</p><ul><li>版本1 - UUID 是根据时间和 节点ID（通常是MAC地址）生成；</li><li>版本2 - UUID是根据标识符（通常是组或用户ID）、时间和节点ID生成；</li><li>版本3、版本5 - 确定性UUID 通过散列（hashing）名字空间（namespace）标识符和名称生成；</li><li>版本4 - UUID 使用随机性或伪随机性生成。</li></ul><h1 id=uuid的实现>UUID的实现
<a class=heading-link href=#uuid%e7%9a%84%e5%ae%9e%e7%8e%b0><i class="fa fa-link" aria-hidden=true></i></a></h1><p>浏览器提供了(<code>crypto.randomUUID()</code>)[https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID] 用来生成UUID（version：4，variants：1），对于node也提供了对应接口,</p><p>它的实现相当简单</p><ul><li>生成 128 个随机位</li><li>用正确的版本和变体信息覆盖其中的一些位</li><li>将 128 位转换为十六进制表示并插入连字符以实现规范文本表示。</li></ul><blockquote><p>version位生成: <code>& 0x0f | 0x40</code>, <code>0x0f</code>的二进制表示<code>00001111</code>, <code>0x40</code>的二进制表示<code>01000000</code>, <code>xxxxxxxx & 00001111</code>即转换为<code>0000xxxx</code>, <code>0000xxxx | 01000000</code>即转换为<code>0100xxxx</code>,
variants位生成: <code>& 0x3f | 0x80</code>, <code>0x3f</code>的二进制表示<code>00111111</code>, <code>0x80</code>的二进制表示<code>10000000</code>, <code>xxxxxxxx & 00111111</code>即转换为<code>00xxxxxx</code>, <code>00xxxxxx | 10000000</code>即转换为<code>10xxxxxx</code></p></blockquote><p>代码部分</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getRandomValues</span>
</span></span><span style=display:flex><span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;crypto&#39;</span>).<span style=color:#a6e22e>webcrypto</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 缓存数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>_data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Uint8Array</span>(<span style=color:#ae81ff>16</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>_hex</span> <span style=color:#f92672>=</span> [...<span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>)].<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>val</span>, <span style=color:#a6e22e>index</span>) =&gt; <span style=color:#a6e22e>index</span>.<span style=color:#a6e22e>toString</span>(<span style=color:#ae81ff>16</span>).<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uuidv4</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 给定的 typedArray 填充随机值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>getRandomValues</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// set version bits
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> (<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x0f</span>) <span style=color:#f92672>|</span> <span style=color:#ae81ff>0x40</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> (<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>&amp;</span> <span style=color:#ae81ff>0x3f</span>) <span style=color:#f92672>|</span> <span style=color:#ae81ff>0x80</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>0</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>1</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>2</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>3</span>]]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>`-</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>4</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>5</span>]]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>`-</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>6</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>7</span>]]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>`-</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>8</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>9</span>]]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>+</span> <span style=color:#e6db74>`-</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>10</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>11</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>12</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>13</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>14</span>]]<span style=color:#e6db74>}${</span><span style=color:#a6e22e>hex</span>[<span style=color:#a6e22e>data</span>[<span style=color:#ae81ff>15</span>]]<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer></footer><div id=cusdis_thread data-host=https://cusdis.com data-app-id=c2b015f9-9a4b-4997-b66f-f9c6ca26ebdd data-page-id=c29b6e645df8beb6f53a770049761909 data-page-url=https://chenkai.life/posts/uuid-understand/ data-page-title=深入理解UUID data-iframe=/js/cusdis/iframe.umd.js data-style=/js/cusdis/style.css></div></article></section></div></main><script src=/js/coder.min.cb0c595e02234420f3ad3886bf4a9bd2874d0e1e78e090138a9ef158b35aaf17.js integrity="sha256-ywxZXgIjRCDzrTiGv0qb0odNDh544JATip7xWLNarxc="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></html>