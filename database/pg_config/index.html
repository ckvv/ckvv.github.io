<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="config一般文件在数据data目录下面如:/usr/local/var/postgres，如果你忘记了目录地址可以SHOW data_directory;查询出来,或者
select setting from pg_settings where name = 'config_file'; -- 查询配置 table pg_hba_file_rules -- 使配置生效 SELECT pg_reload_conf(); pg_hba.conf文件介绍
pg_hba.conf文件    客户端认证是由一个配置文件(通常名为pg_hba.conf)控制的， 它存放在数据库集群的数据目录里。HBA的意思是&#34;host-based authentication&rdquo;， 也就是基于主机的认证。在initdb初始化数据目录的时候， 它会安装一个缺省的pg_hba.conf文件。不过我们也可以把认证配置文件放在其它地方； 参阅hba_file配置参数。 g_hba.conf文件的常用格式是一组记录，每行一条。空白行将被忽略， 井号#开头的注释也被忽略。记录不能跨行存在。 一条记录是由若干用空格和/或制表符分隔的字段组成。如果字段用引号包围，那么它可以包含空白。 在数据库、用户或地址文件中引用一个关键词（如，all 或 replication） 使这个词失去它的特殊含义，只是用这个名字匹配一个数据库、用户或主机。
每条记录声明一种连接类型、一个客户端 IP 地址范围(如果和连接类型相关的话)、 一个数据库名、一个用户名字、对匹配这些参数的连接使用的认证方法。第一条匹配连接类型、 客户端地址、连接请求的数据库名和用户名的记录将用于执行认证。这个处理过程没有 &ldquo;跨越&#34;或者&#34;回头&#34;的说法：如果选择了一条记录而且认证失败， 那么将不再考虑后面的记录。如果没有匹配的记录，那么访问将被拒绝。
每条记录可以是下面七种格式之一
local database user auth-method [auth-options] host database user address auth-method [auth-options] hostssl database user address auth-method [auth-options] hostnossl database user address auth-method [auth-options] host database user IP-address IP-mask auth-method [auth-options] hostssl database user IP-address IP-mask auth-method [auth-options] hostnossl database user IP-address IP-mask auth-method [auth-options] `` ## demo 允许在本机上的任何用户使用 Unix 域套接字(本地连接的缺省)    以任何数据库用户身份连接任何数据库       TYPE DATABASE USER ADDRESS METHOD    local all all trust"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="pg的数据库配置"><meta name=twitter:description content="config一般文件在数据data目录下面如:/usr/local/var/postgres，如果你忘记了目录地址可以SHOW data_directory;查询出来,或者
select setting from pg_settings where name = 'config_file'; -- 查询配置 table pg_hba_file_rules -- 使配置生效 SELECT pg_reload_conf(); pg_hba.conf文件介绍
pg_hba.conf文件    客户端认证是由一个配置文件(通常名为pg_hba.conf)控制的， 它存放在数据库集群的数据目录里。HBA的意思是&#34;host-based authentication&rdquo;， 也就是基于主机的认证。在initdb初始化数据目录的时候， 它会安装一个缺省的pg_hba.conf文件。不过我们也可以把认证配置文件放在其它地方； 参阅hba_file配置参数。 g_hba.conf文件的常用格式是一组记录，每行一条。空白行将被忽略， 井号#开头的注释也被忽略。记录不能跨行存在。 一条记录是由若干用空格和/或制表符分隔的字段组成。如果字段用引号包围，那么它可以包含空白。 在数据库、用户或地址文件中引用一个关键词（如，all 或 replication） 使这个词失去它的特殊含义，只是用这个名字匹配一个数据库、用户或主机。
每条记录声明一种连接类型、一个客户端 IP 地址范围(如果和连接类型相关的话)、 一个数据库名、一个用户名字、对匹配这些参数的连接使用的认证方法。第一条匹配连接类型、 客户端地址、连接请求的数据库名和用户名的记录将用于执行认证。这个处理过程没有 &ldquo;跨越&#34;或者&#34;回头&#34;的说法：如果选择了一条记录而且认证失败， 那么将不再考虑后面的记录。如果没有匹配的记录，那么访问将被拒绝。
每条记录可以是下面七种格式之一
local database user auth-method [auth-options] host database user address auth-method [auth-options] hostssl database user address auth-method [auth-options] hostnossl database user address auth-method [auth-options] host database user IP-address IP-mask auth-method [auth-options] hostssl database user IP-address IP-mask auth-method [auth-options] hostnossl database user IP-address IP-mask auth-method [auth-options] `` ## demo 允许在本机上的任何用户使用 Unix 域套接字(本地连接的缺省)    以任何数据库用户身份连接任何数据库       TYPE DATABASE USER ADDRESS METHOD    local all all trust"><meta property="og:title" content="pg的数据库配置"><meta property="og:description" content="config一般文件在数据data目录下面如:/usr/local/var/postgres，如果你忘记了目录地址可以SHOW data_directory;查询出来,或者
select setting from pg_settings where name = 'config_file'; -- 查询配置 table pg_hba_file_rules -- 使配置生效 SELECT pg_reload_conf(); pg_hba.conf文件介绍
pg_hba.conf文件    客户端认证是由一个配置文件(通常名为pg_hba.conf)控制的， 它存放在数据库集群的数据目录里。HBA的意思是&#34;host-based authentication&rdquo;， 也就是基于主机的认证。在initdb初始化数据目录的时候， 它会安装一个缺省的pg_hba.conf文件。不过我们也可以把认证配置文件放在其它地方； 参阅hba_file配置参数。 g_hba.conf文件的常用格式是一组记录，每行一条。空白行将被忽略， 井号#开头的注释也被忽略。记录不能跨行存在。 一条记录是由若干用空格和/或制表符分隔的字段组成。如果字段用引号包围，那么它可以包含空白。 在数据库、用户或地址文件中引用一个关键词（如，all 或 replication） 使这个词失去它的特殊含义，只是用这个名字匹配一个数据库、用户或主机。
每条记录声明一种连接类型、一个客户端 IP 地址范围(如果和连接类型相关的话)、 一个数据库名、一个用户名字、对匹配这些参数的连接使用的认证方法。第一条匹配连接类型、 客户端地址、连接请求的数据库名和用户名的记录将用于执行认证。这个处理过程没有 &ldquo;跨越&#34;或者&#34;回头&#34;的说法：如果选择了一条记录而且认证失败， 那么将不再考虑后面的记录。如果没有匹配的记录，那么访问将被拒绝。
每条记录可以是下面七种格式之一
local database user auth-method [auth-options] host database user address auth-method [auth-options] hostssl database user address auth-method [auth-options] hostnossl database user address auth-method [auth-options] host database user IP-address IP-mask auth-method [auth-options] hostssl database user IP-address IP-mask auth-method [auth-options] hostnossl database user IP-address IP-mask auth-method [auth-options] `` ## demo 允许在本机上的任何用户使用 Unix 域套接字(本地连接的缺省)    以任何数据库用户身份连接任何数据库       TYPE DATABASE USER ADDRESS METHOD    local all all trust"><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai0520.github.io/database/pg_config/"><meta property="article:published_time" content="2021-07-09T15:37:56+08:00"><meta property="article:modified_time" content="2021-07-09T15:37:56+08:00"><title>pg的数据库配置 · CK's Blog</title><link rel=canonical href=https://chenkai0520.github.io/database/pg_config/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.51ca9f0bdddc89654ce4e63f7ec959f54b8ca29b1421c10075ce7c1c4df5fe03.css integrity="sha256-UcqfC93ciWVM5OY/fslZ9UuMopsUIcEAdc58HE31/gM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.72.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/index.xml>RSS</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=google>Google</button>
<button class=search-btn data-type=github>GitHub</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai0520.github.io/database/pg_config/>pg的数据库配置</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title target=_blank href=https://github.com/chenkai0520/chenkai0520.github.io/edit/main/content/database/pg_config.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2021-07-09T15:37:56+08:00>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/database/>database</a></span></div></div><p>config一般文件在数据data目录下面如:<code>/usr/local/var/postgres</code>，如果你忘记了目录地址可以<code>SHOW data_directory;</code>查询出来,或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>select</span> setting <span style=color:#66d9ef>from</span> pg_settings <span style=color:#66d9ef>where</span> name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;config_file&#39;</span>; 

<span style=color:#75715e>-- 查询配置
</span><span style=color:#75715e></span><span style=color:#66d9ef>table</span> pg_hba_file_rules
<span style=color:#75715e>-- 使配置生效
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> pg_reload_conf();
</code></pre></div><p><a href=http://www.postgres.cn/docs/9.4/auth-pg-hba-conf.html>pg_hba.conf文件介绍</a></p><h2 id=pg_hbaconf文件>pg_hba.conf文件
<a class=heading-link href=#pg_hbaconf%e6%96%87%e4%bb%b6><i class="fa fa-link" aria-hidden=true></i></a></h2><p>客户端认证是由一个配置文件(通常名为pg_hba.conf)控制的， 它存放在数据库集群的数据目录里。HBA的意思是"host-based authentication&rdquo;， 也就是基于主机的认证。在initdb初始化数据目录的时候， 它会安装一个缺省的pg_hba.conf文件。不过我们也可以把认证配置文件放在其它地方； 参阅hba_file配置参数。
g_hba.conf文件的常用格式是一组记录，每行一条。空白行将被忽略， 井号#开头的注释也被忽略。记录不能跨行存在。 一条记录是由若干用空格和/或制表符分隔的字段组成。如果字段用引号包围，那么它可以包含空白。 在数据库、用户或地址文件中引用一个关键词（如，all 或 replication） 使这个词失去它的特殊含义，只是用这个名字匹配一个数据库、用户或主机。</p><p>每条记录声明一种连接类型、一个客户端 IP 地址范围(如果和连接类型相关的话)、 一个数据库名、一个用户名字、对匹配这些参数的连接使用的认证方法。第一条匹配连接类型、 客户端地址、连接请求的数据库名和用户名的记录将用于执行认证。这个处理过程没有 &ldquo;跨越"或者"回头"的说法：如果选择了一条记录而且认证失败， 那么将不再考虑后面的记录。如果没有匹配的记录，那么访问将被拒绝。</p><p>每条记录可以是下面七种格式之一</p><pre><code>local      database  user  auth-method  [auth-options]
host       database  user  address  auth-method  [auth-options]
hostssl    database  user  address  auth-method  [auth-options]
hostnossl  database  user  address  auth-method  [auth-options]
host       database  user  IP-address  IP-mask  auth-method  [auth-options]
hostssl    database  user  IP-address  IP-mask  auth-method  [auth-options]
hostnossl  database  user  IP-address  IP-mask  auth-method  [auth-options]
``

## demo 
</code></pre><h2 id=允许在本机上的任何用户使用-unix-域套接字本地连接的缺省>允许在本机上的任何用户使用 Unix 域套接字(本地连接的缺省)
<a class=heading-link href=#%e5%85%81%e8%ae%b8%e5%9c%a8%e6%9c%ac%e6%9c%ba%e4%b8%8a%e7%9a%84%e4%bb%bb%e4%bd%95%e7%94%a8%e6%88%b7%e4%bd%bf%e7%94%a8-unix-%e5%9f%9f%e5%a5%97%e6%8e%a5%e5%ad%97%e6%9c%ac%e5%9c%b0%e8%bf%9e%e6%8e%a5%e7%9a%84%e7%bc%ba%e7%9c%81><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=以任何数据库用户身份连接任何数据库>以任何数据库用户身份连接任何数据库
<a class=heading-link href=#%e4%bb%a5%e4%bb%bb%e4%bd%95%e6%95%b0%e6%8d%ae%e5%ba%93%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e8%bf%9e%e6%8e%a5%e4%bb%bb%e4%bd%95%e6%95%b0%e6%8d%ae%e5%ba%93><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading><a class=heading-link href=#heading><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method><i class="fa fa-link" aria-hidden=true></i></a></h2><p>local all all trust</p><h2 id=和上面相同但是使用的是回环的loopbacktcpip-连接>和上面相同，但是使用的是回环的(loopback)TCP/IP 连接
<a class=heading-link href=#%e5%92%8c%e4%b8%8a%e9%9d%a2%e7%9b%b8%e5%90%8c%e4%bd%86%e6%98%af%e4%bd%bf%e7%94%a8%e7%9a%84%e6%98%af%e5%9b%9e%e7%8e%af%e7%9a%84loopbacktcpip-%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-1><a class=heading-link href=#heading-1><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-1>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-1><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all 127.0.0.1/32 trust</p><h2 id=和上面一行相同但是用的是独立的子网掩码字段>和上面一行相同，但是用的是独立的子网掩码字段
<a class=heading-link href=#%e5%92%8c%e4%b8%8a%e9%9d%a2%e4%b8%80%e8%a1%8c%e7%9b%b8%e5%90%8c%e4%bd%86%e6%98%af%e7%94%a8%e7%9a%84%e6%98%af%e7%8b%ac%e7%ab%8b%e7%9a%84%e5%ad%90%e7%bd%91%e6%8e%a9%e7%a0%81%e5%ad%97%e6%ae%b5><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-2><a class=heading-link href=#heading-2><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------ip-address------ip-mask-------------method>TYPE DATABASE USER IP-ADDRESS IP-MASK METHOD
<a class=heading-link href=#type--database--------user------------ip-address------ip-mask-------------method><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all 127.0.0.1 255.255.255.255 trust</p><h2 id=在ipv6上相同>在IPv6上相同。
<a class=heading-link href=#%e5%9c%a8ipv6%e4%b8%8a%e7%9b%b8%e5%90%8c><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-3><a class=heading-link href=#heading-3><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-2>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-2><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all ::1/128 trust</p><h2 id=和上面相同但是使用一个主机名通常包括ipv4-和-ipv6>和上面相同，但是使用一个主机名（通常包括IPv4 和 IPv6）。
<a class=heading-link href=#%e5%92%8c%e4%b8%8a%e9%9d%a2%e7%9b%b8%e5%90%8c%e4%bd%86%e6%98%af%e4%bd%bf%e7%94%a8%e4%b8%80%e4%b8%aa%e4%b8%bb%e6%9c%ba%e5%90%8d%e9%80%9a%e5%b8%b8%e5%8c%85%e6%8b%acipv4-%e5%92%8c-ipv6><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-4><a class=heading-link href=#heading-4><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-3>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-3><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all localhost trust</p><h2 id=允许-ip-地址为-19216893x-的任何主机与-postgres-数据库相连>允许 IP 地址为 192.168.93.x 的任何主机与 &ldquo;postgres&rdquo; 数据库相连，
<a class=heading-link href=#%e5%85%81%e8%ae%b8-ip-%e5%9c%b0%e5%9d%80%e4%b8%ba-19216893x-%e7%9a%84%e4%bb%bb%e4%bd%95%e4%b8%bb%e6%9c%ba%e4%b8%8e-postgres-%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9b%b8%e8%bf%9e><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=用与他们在自己的主机上相同-ident-的用户名标识他自己通常是他的操作系统用户名>用与他们在自己的主机上相同 ident 的用户名标识他自己(通常是他的操作系统用户名)
<a class=heading-link href=#%e7%94%a8%e4%b8%8e%e4%bb%96%e4%bb%ac%e5%9c%a8%e8%87%aa%e5%b7%b1%e7%9a%84%e4%b8%bb%e6%9c%ba%e4%b8%8a%e7%9b%b8%e5%90%8c-ident-%e7%9a%84%e7%94%a8%e6%88%b7%e5%90%8d%e6%a0%87%e8%af%86%e4%bb%96%e8%87%aa%e5%b7%b1%e9%80%9a%e5%b8%b8%e6%98%af%e4%bb%96%e7%9a%84%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%94%a8%e6%88%b7%e5%90%8d><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-5><a class=heading-link href=#heading-5><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-4>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-4><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host postgres all 192.168.93.0/24 ident</p><h2 id=允许来自主机-1921681210-的用户提供了正确的口令之后与-postgres-数据库连接>允许来自主机 192.168.12.10 的用户提供了正确的口令之后与 &ldquo;postgres&rdquo; 数据库连接。
<a class=heading-link href=#%e5%85%81%e8%ae%b8%e6%9d%a5%e8%87%aa%e4%b8%bb%e6%9c%ba-1921681210-%e7%9a%84%e7%94%a8%e6%88%b7%e6%8f%90%e4%be%9b%e4%ba%86%e6%ad%a3%e7%a1%ae%e7%9a%84%e5%8f%a3%e4%bb%a4%e4%b9%8b%e5%90%8e%e4%b8%8e-postgres-%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-6><a class=heading-link href=#heading-6><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-5>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-5><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host postgres all 192.168.12.10/32 md5</p><h2 id=允许来自在examplecom域里的主机的用户在提供了正确的口令之后与任意数据库连接>允许来自在example.com域里的主机的用户在提供了正确的口令之后与任意数据库连接。
<a class=heading-link href=#%e5%85%81%e8%ae%b8%e6%9d%a5%e8%87%aa%e5%9c%a8examplecom%e5%9f%9f%e9%87%8c%e7%9a%84%e4%b8%bb%e6%9c%ba%e7%9a%84%e7%94%a8%e6%88%b7%e5%9c%a8%e6%8f%90%e4%be%9b%e4%ba%86%e6%ad%a3%e7%a1%ae%e7%9a%84%e5%8f%a3%e4%bb%a4%e4%b9%8b%e5%90%8e%e4%b8%8e%e4%bb%bb%e6%84%8f%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-7><a class=heading-link href=#heading-7><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-6>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-6><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all .example.com md5</p><h2 id=如果前面没有其它-host-行那么下面两行将拒绝所有来自-192168541-的连接请求因为前面的记录先匹配>如果前面没有其它 &ldquo;host&rdquo; 行，那么下面两行将拒绝所有来自 192.168.54.1 的连接请求(因为前面的记录先匹配)。
<a class=heading-link href=#%e5%a6%82%e6%9e%9c%e5%89%8d%e9%9d%a2%e6%b2%a1%e6%9c%89%e5%85%b6%e5%ae%83-host-%e8%a1%8c%e9%82%a3%e4%b9%88%e4%b8%8b%e9%9d%a2%e4%b8%a4%e8%a1%8c%e5%b0%86%e6%8b%92%e7%bb%9d%e6%89%80%e6%9c%89%e6%9d%a5%e8%87%aa-192168541-%e7%9a%84%e8%bf%9e%e6%8e%a5%e8%af%b7%e6%b1%82%e5%9b%a0%e4%b8%ba%e5%89%8d%e9%9d%a2%e7%9a%84%e8%ae%b0%e5%bd%95%e5%85%88%e5%8c%b9%e9%85%8d><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=但是允许来自互联网上其它任何地方的有效的-gssapi-认证的连接>但是允许来自互联网上其它任何地方的有效的 GSSAPI 认证的连接。
<a class=heading-link href=#%e4%bd%86%e6%98%af%e5%85%81%e8%ae%b8%e6%9d%a5%e8%87%aa%e4%ba%92%e8%81%94%e7%bd%91%e4%b8%8a%e5%85%b6%e5%ae%83%e4%bb%bb%e4%bd%95%e5%9c%b0%e6%96%b9%e7%9a%84%e6%9c%89%e6%95%88%e7%9a%84-gssapi-%e8%ae%a4%e8%af%81%e7%9a%84%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=零掩码引起不考虑主机-ip-的任何位因此它匹配任何主机>零掩码引起不考虑主机 IP 的任何位。因此它匹配任何主机。
<a class=heading-link href=#%e9%9b%b6%e6%8e%a9%e7%a0%81%e5%bc%95%e8%b5%b7%e4%b8%8d%e8%80%83%e8%99%91%e4%b8%bb%e6%9c%ba-ip-%e7%9a%84%e4%bb%bb%e4%bd%95%e4%bd%8d%e5%9b%a0%e6%ad%a4%e5%ae%83%e5%8c%b9%e9%85%8d%e4%bb%bb%e4%bd%95%e4%b8%bb%e6%9c%ba><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-8><a class=heading-link href=#heading-8><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-7>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-7><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all 192.168.54.1/32 reject
host all all 0.0.0.0/0 gss</p><h2 id=允许来自-192168xx-的任何用户与任意数据库连接只要他们通过-ident-检查>允许来自 192.168.x.x 的任何用户与任意数据库连接，只要他们通过 ident 检查。
<a class=heading-link href=#%e5%85%81%e8%ae%b8%e6%9d%a5%e8%87%aa-192168xx-%e7%9a%84%e4%bb%bb%e4%bd%95%e7%94%a8%e6%88%b7%e4%b8%8e%e4%bb%bb%e6%84%8f%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e5%8f%aa%e8%a6%81%e4%bb%96%e4%bb%ac%e9%80%9a%e8%bf%87-ident-%e6%a3%80%e6%9f%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=但如果-ident-说该用户是-bryanh-且他要求以-postgresql-用户-guest1-连接>但如果 ident 说该用户是 &ldquo;bryanh&rdquo; 且他要求以 PostgreSQL 用户 &ldquo;guest1&rdquo; 连接，
<a class=heading-link href=#%e4%bd%86%e5%a6%82%e6%9e%9c-ident-%e8%af%b4%e8%af%a5%e7%94%a8%e6%88%b7%e6%98%af-bryanh-%e4%b8%94%e4%bb%96%e8%a6%81%e6%b1%82%e4%bb%a5-postgresql-%e7%94%a8%e6%88%b7-guest1-%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=那么只有在-pg_identconf-里有-omicron-的映射说-bryanh-允许以-guest1-进行连接时才真正可以进行连接>那么只有在 pg_ident.conf 里有 &ldquo;omicron&rdquo; 的映射说 &ldquo;bryanh&rdquo; 允许以 &ldquo;guest1&rdquo; 进行连接时才真正可以进行连接。
<a class=heading-link href=#%e9%82%a3%e4%b9%88%e5%8f%aa%e6%9c%89%e5%9c%a8-pg_identconf-%e9%87%8c%e6%9c%89-omicron-%e7%9a%84%e6%98%a0%e5%b0%84%e8%af%b4-bryanh-%e5%85%81%e8%ae%b8%e4%bb%a5-guest1-%e8%bf%9b%e8%a1%8c%e8%bf%9e%e6%8e%a5%e6%97%b6%e6%89%8d%e7%9c%9f%e6%ad%a3%e5%8f%af%e4%bb%a5%e8%bf%9b%e8%a1%8c%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-9><a class=heading-link href=#heading-9><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-8>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-8><i class="fa fa-link" aria-hidden=true></i></a></h2><p>host all all 192.168.0.0/16 ident map=omicron</p><h2 id=如果下面是用于本地连接的仅有的三行那么它们将允许本地用户只和同名数据库连接>如果下面是用于本地连接的仅有的三行，那么它们将允许本地用户只和同名数据库连接。
<a class=heading-link href=#%e5%a6%82%e6%9e%9c%e4%b8%8b%e9%9d%a2%e6%98%af%e7%94%a8%e4%ba%8e%e6%9c%ac%e5%9c%b0%e8%bf%9e%e6%8e%a5%e7%9a%84%e4%bb%85%e6%9c%89%e7%9a%84%e4%b8%89%e8%a1%8c%e9%82%a3%e4%b9%88%e5%ae%83%e4%bb%ac%e5%b0%86%e5%85%81%e8%ae%b8%e6%9c%ac%e5%9c%b0%e7%94%a8%e6%88%b7%e5%8f%aa%e5%92%8c%e5%90%8c%e5%90%8d%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=只有管理员和-support-角色里的成员例外他们可以连接到任何数据库>只有管理员和 &ldquo;support&rdquo; 角色里的成员例外，他们可以连接到任何数据库。
<a class=heading-link href=#%e5%8f%aa%e6%9c%89%e7%ae%a1%e7%90%86%e5%91%98%e5%92%8c-support-%e8%a7%92%e8%89%b2%e9%87%8c%e7%9a%84%e6%88%90%e5%91%98%e4%be%8b%e5%a4%96%e4%bb%96%e4%bb%ac%e5%8f%af%e4%bb%a5%e8%bf%9e%e6%8e%a5%e5%88%b0%e4%bb%bb%e4%bd%95%e6%95%b0%e6%8d%ae%e5%ba%93><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=pgdataadmins-文件列出了那些允许与所有数据库连接的用户名>$PGDATA/admins 文件列出了那些允许与所有数据库连接的用户名。
<a class=heading-link href=#pgdataadmins-%e6%96%87%e4%bb%b6%e5%88%97%e5%87%ba%e4%ba%86%e9%82%a3%e4%ba%9b%e5%85%81%e8%ae%b8%e4%b8%8e%e6%89%80%e6%9c%89%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e7%9a%84%e7%94%a8%e6%88%b7%e5%90%8d><i class="fa fa-link" aria-hidden=true></i></a></h2><h2 id=在所有情况下都需要口令>在所有情况下都需要口令。
<a class=heading-link href=#%e5%9c%a8%e6%89%80%e6%9c%89%e6%83%85%e5%86%b5%e4%b8%8b%e9%83%bd%e9%9c%80%e8%a6%81%e5%8f%a3%e4%bb%a4><i class="fa fa-link" aria-hidden=true></i></a></h2><h1 id=heading-10><a class=heading-link href=#heading-10><i class="fa fa-link" aria-hidden=true></i></a></h1><h2 id=type--database--------user------------address-----------------method-9>TYPE DATABASE USER ADDRESS METHOD
<a class=heading-link href=#type--database--------user------------address-----------------method-9><i class="fa fa-link" aria-hidden=true></i></a></h2><p>local sameuser all md5
local all @admins md5
local all +support md5</p><h2 id=上面最后两行可以合起来写成一行>上面最后两行可以合起来写成一行
<a class=heading-link href=#%e4%b8%8a%e9%9d%a2%e6%9c%80%e5%90%8e%e4%b8%a4%e8%a1%8c%e5%8f%af%e4%bb%a5%e5%90%88%e8%b5%b7%e6%9d%a5%e5%86%99%e6%88%90%e4%b8%80%e8%a1%8c><i class="fa fa-link" aria-hidden=true></i></a></h2><p>local all @admins,+support md5</p><h2 id=数据库字段也可以使用列表和文件名>数据库字段也可以使用列表和文件名：
<a class=heading-link href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ad%97%e6%ae%b5%e4%b9%9f%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e5%88%97%e8%a1%a8%e5%92%8c%e6%96%87%e4%bb%b6%e5%90%8d><i class="fa fa-link" aria-hidden=true></i></a></h2><p>local db1,db2,@demodbs all md5</p><pre><code>&gt; 一个用户要想成功连接到特定的数据库，不仅需要通过pg_hba.conf的检查， 还必须要有该数据库上的CONNECT权限。如果希望限制哪些用户能够连接到哪些数据库， 赋予/撤销CONNECT权限通常比在pg_hba.conf中设置规则简单。</code></pre><div id=vcomments></div></article></section></div></main><script src=/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body></html>