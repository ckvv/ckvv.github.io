<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="创建vue的单元测试项目
vue-cli 创建项目    vue create vue-test Vue CLI 3可以向项目组中直接添加unit-jest    vue add @vue/unit-jest 可以发现项目中多了很多文件，并且已经创建了一个测试文件demo，
进行测试    vue在添加单元测试框架时会在package.jsonscripts添加一个test:unit，我们可以允许此命令打开测试
在vue版本过低的项目中添加单元测试    我们可以选择以下两种方式
 升级vue版本及其依赖   vue版本如果太旧的不支持此种方式直接添加单元测试,可以选择更新vue版本2.5以上，并更新其依赖库。 此种方法可能会出现浏览器报exportes错误，把.babelrc文件transform-runtime删除即可。
  采用旧版本方式   Note: This example is outdated. It&rsquo;s now recommended to scaffold your project with Vue CLI 3 which provides out-of-the-box configurations for unit testing.
 vue-test-utils-jest-example     Example project using Jest + vue-test-utils together"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="vue项目添加单元测试"><meta name=twitter:description content="创建vue的单元测试项目
vue-cli 创建项目    vue create vue-test Vue CLI 3可以向项目组中直接添加unit-jest    vue add @vue/unit-jest 可以发现项目中多了很多文件，并且已经创建了一个测试文件demo，
进行测试    vue在添加单元测试框架时会在package.jsonscripts添加一个test:unit，我们可以允许此命令打开测试
在vue版本过低的项目中添加单元测试    我们可以选择以下两种方式
 升级vue版本及其依赖   vue版本如果太旧的不支持此种方式直接添加单元测试,可以选择更新vue版本2.5以上，并更新其依赖库。 此种方法可能会出现浏览器报exportes错误，把.babelrc文件transform-runtime删除即可。
  采用旧版本方式   Note: This example is outdated. It&rsquo;s now recommended to scaffold your project with Vue CLI 3 which provides out-of-the-box configurations for unit testing.
 vue-test-utils-jest-example     Example project using Jest + vue-test-utils together"><meta property="og:title" content="vue项目添加单元测试"><meta property="og:description" content="创建vue的单元测试项目
vue-cli 创建项目    vue create vue-test Vue CLI 3可以向项目组中直接添加unit-jest    vue add @vue/unit-jest 可以发现项目中多了很多文件，并且已经创建了一个测试文件demo，
进行测试    vue在添加单元测试框架时会在package.jsonscripts添加一个test:unit，我们可以允许此命令打开测试
在vue版本过低的项目中添加单元测试    我们可以选择以下两种方式
 升级vue版本及其依赖   vue版本如果太旧的不支持此种方式直接添加单元测试,可以选择更新vue版本2.5以上，并更新其依赖库。 此种方法可能会出现浏览器报exportes错误，把.babelrc文件transform-runtime删除即可。
  采用旧版本方式   Note: This example is outdated. It&rsquo;s now recommended to scaffold your project with Vue CLI 3 which provides out-of-the-box configurations for unit testing.
 vue-test-utils-jest-example     Example project using Jest + vue-test-utils together"><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/web/vue_test/"><meta property="article:published_time" content="2021-07-09T15:37:56+08:00"><meta property="article:modified_time" content="2021-07-09T15:37:56+08:00"><title>vue项目添加单元测试 · CK's Blog</title><link rel=canonical href=https://chenkai.life/web/vue_test/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.ffed55576b1fe8cd1a532c3c9691900c09813ce5a8e0fbf58a6e377169305cf3.css integrity="sha256-/+1VV2sf6M0aUyw8lpGQDAmBPOWo4Pv1im43cWkwXPM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.72.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/index.xml>RSS</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=google>Google</button>
<button class=search-btn data-type=github>GitHub</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/web/vue_test/>vue项目添加单元测试</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title target=_blank href=https://github.com/chenkai0520/chenkai0520.github.io/edit/main/content/web/vue_test.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2021-07-09T15:37:56+08:00>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/web/>web</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/vue/>vue</a></span></div></div><p>创建vue的单元测试项目</p><h3 id=vue-cli-创建项目>vue-cli 创建项目
<a class=heading-link href=#vue-cli-%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae><i class="fa fa-link" aria-hidden=true></i></a></h3><pre><code>vue create vue-test
</code></pre><h3 id=vue-cli-3可以向项目组中直接添加unit-jest>Vue CLI 3可以向项目组中直接添加unit-jest
<a class=heading-link href=#vue-cli-3%e5%8f%af%e4%bb%a5%e5%90%91%e9%a1%b9%e7%9b%ae%e7%bb%84%e4%b8%ad%e7%9b%b4%e6%8e%a5%e6%b7%bb%e5%8a%a0unit-jest><i class="fa fa-link" aria-hidden=true></i></a></h3><pre><code>vue add @vue/unit-jest
</code></pre><p>可以发现项目中多了很多文件，并且已经创建了一个测试文件demo，</p><h3 id=进行测试>进行测试
<a class=heading-link href=#%e8%bf%9b%e8%a1%8c%e6%b5%8b%e8%af%95><i class="fa fa-link" aria-hidden=true></i></a></h3><p>vue在添加单元测试框架时会在<code>package.json</code>scripts添加一个test:unit，我们可以允许此命令打开测试</p><h3 id=在vue版本过低的项目中添加单元测试>在vue版本过低的项目中添加单元测试
<a class=heading-link href=#%e5%9c%a8vue%e7%89%88%e6%9c%ac%e8%bf%87%e4%bd%8e%e7%9a%84%e9%a1%b9%e7%9b%ae%e4%b8%ad%e6%b7%bb%e5%8a%a0%e5%8d%95%e5%85%83%e6%b5%8b%e8%af%95><i class="fa fa-link" aria-hidden=true></i></a></h3><p>我们可以选择以下两种方式</p><ul><li>升级vue版本及其依赖</li></ul><blockquote><p>vue版本如果太旧的不支持此种方式直接添加单元测试,可以选择更新vue版本2.5以上，并更新其依赖库。
此种方法可能会出现浏览器报exportes错误，把<code>.babelrc</code>文件transform-runtime删除即可。</p></blockquote><ul><li>采用旧版本方式</li></ul><blockquote><p>Note: This example is outdated. It&rsquo;s now recommended to scaffold your project with <a href=https://cli.vuejs.org/>Vue CLI 3</a> which provides out-of-the-box configurations for unit testing.</p></blockquote><h3 id=vue-test-utils-jest-example>vue-test-utils-jest-example
<a class=heading-link href=#vue-test-utils-jest-example><i class="fa fa-link" aria-hidden=true></i></a></h3><blockquote><p>Example project using Jest + vue-test-utils together</p></blockquote><p>This is based on the <code>vue-cli</code> <code>webpack-simple</code> template. Test-specific changes include:</p><h3 id=additional-dependencies>Additional Dependencies
<a class=heading-link href=#additional-dependencies><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li><code>vue-test-utils</code></li><li><code>jest</code></li><li><code>babel-jest</code> (for ES2015+ features in tests)</li><li><code>vue-jest</code> (for handling <code>*.vue</code> files in tests)</li><li><code>jest-serializer-vue</code> (for snapshot tests)</li></ul><h3 id=additional-configuration>Additional Configuration
<a class=heading-link href=#additional-configuration><i class="fa fa-link" aria-hidden=true></i></a></h3><h4 id=packagejson><code>package.json</code>
<a class=heading-link href=#packagejson><i class="fa fa-link" aria-hidden=true></i></a></h4><p>The following configurations are recommended for Jest:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>{
  <span style=color:#e6db74>&#34;jest&#34;</span><span style=color:#f92672>:</span> {
    <span style=color:#e6db74>&#34;moduleFileExtensions&#34;</span><span style=color:#f92672>:</span> [
      <span style=color:#e6db74>&#34;js&#34;</span>,
      <span style=color:#e6db74>&#34;json&#34;</span>,
      <span style=color:#75715e>// tell Jest to handle *.vue files
</span><span style=color:#75715e></span>      <span style=color:#e6db74>&#34;vue&#34;</span>
    ],
    <span style=color:#e6db74>&#34;transform&#34;</span><span style=color:#f92672>:</span> {
      <span style=color:#75715e>// process js with babel-jest
</span><span style=color:#75715e></span>      <span style=color:#e6db74>&#34;^.+\\.js$&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&lt;rootDir&gt;/node_modules/babel-jest&#34;</span>,
      <span style=color:#75715e>// process *.vue files with vue-jest
</span><span style=color:#75715e></span>      <span style=color:#e6db74>&#34;.*\\.(vue)$&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&lt;rootDir&gt;/node_modules/vue-jest&#34;</span>
    },
    <span style=color:#75715e>// support the same @ -&gt; src alias mapping in source code
</span><span style=color:#75715e></span>    <span style=color:#e6db74>&#34;moduleNameMapper&#34;</span><span style=color:#f92672>:</span> {
      <span style=color:#e6db74>&#34;^@/(.*)$&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&lt;rootDir&gt;/src/$1&#34;</span>
    },
    <span style=color:#75715e>// serializer for snapshots
</span><span style=color:#75715e></span>    <span style=color:#e6db74>&#34;snapshotSerializers&#34;</span><span style=color:#f92672>:</span> [
      <span style=color:#e6db74>&#34;&lt;rootDir&gt;/node_modules/jest-serializer-vue&#34;</span>
    ]
  }
}
</code></pre></div><h4 id=babelrc><code>.babelrc</code>
<a class=heading-link href=#babelrc><i class="fa fa-link" aria-hidden=true></i></a></h4><p>Our default Babel config disables ES modules transpilation because webpack already knows how to handle ES modules. However, we do need to enable it for our tests because Jest tests are run directly in Node.</p><p>Also, if our tests are run in a relatively newer version of Node, most of the ES features are already supported - we can tell <code>babel-preset-env</code> to target the Node version we are using. This skips transpiling unnecessary features and makes our tests boot faster.</p><p>To apply these options only for tests, we need to add a separate config under <code>env.test</code> (this will be automatically picked up by <code>babel-jest</code>):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>{
  <span style=color:#e6db74>&#34;presets&#34;</span><span style=color:#f92672>:</span> [
    [<span style=color:#e6db74>&#34;env&#34;</span>, { <span style=color:#e6db74>&#34;modules&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> }]
  ],
  <span style=color:#e6db74>&#34;env&#34;</span><span style=color:#f92672>:</span> {
    <span style=color:#e6db74>&#34;test&#34;</span><span style=color:#f92672>:</span> {
      <span style=color:#e6db74>&#34;presets&#34;</span><span style=color:#f92672>:</span> [
        [<span style=color:#e6db74>&#34;env&#34;</span>, { <span style=color:#e6db74>&#34;targets&#34;</span><span style=color:#f92672>:</span> { <span style=color:#e6db74>&#34;node&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;current&#34;</span> }}]
      ]
    }
  }
}
</code></pre></div><h3 id=build-commands>Build Commands
<a class=heading-link href=#build-commands><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>## install dependencies</span>
npm install

<span style=color:#75715e>## serve with hot reload at localhost:8080</span>
npm run dev

<span style=color:#75715e>## build for production with minification</span>
npm run build

<span style=color:#75715e>## run tests</span>
npm test
</code></pre></div><p>For detailed explanation on how things work, consult the <a href=https://vue-test-utils.vuejs.org/guides/#testing-single-file-components-with-jest>docs for vue-test-utils</a>.</p><div id=vcomments></div></article></section></div></main><script src=/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body></html>