<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=theme-color content="#ffffff"><meta name=color-scheme content="light dark"><meta name=description content="CSS 即层叠样式表(Cascading Style Sheets）是一种样式表语言，它没有作用域的概念，引入即全局生效的，但一个样式是否起作用由多个因素共同决定，比如：
重要程度 优先级 样式加载顺序 所以当我们在页面中使用时可能会遇到组件间的样式互相影响的情况，特别是引入了多个组件库或者类名命名不规范时，我们就需要对样式进行隔离，这样就可以避免样式冲突。下面我介绍几种方案： 类名添加特定的前缀 一般来说，我们会在组件内部使用一个特定的前缀，避免组件之间的样式冲突。比如 antd 的组件内部的样式，都会使用ant-前缀，element-ui 的组件内部的样式，都会使用el-前缀。 由于原生 css 的功能太弱鸡了, 我们在实际开发中一般使用 css 预处理框架如 less, sass 等，对于这种我们也可以使用一个类似的功能。
对于 less // button.less @name: v-; .@{name}button { background-color: green; } // 编译为 // .v-button { // background-color: green; // } 重写前缀
@import &#34;button.less&#34;; @name: k-; // 编译为 // .k-button { // background-color: green; // } 对于 sass sass 目前版本支持与 less 类似的写法，但是 Sass 团队不鼓励继续使用@import规则。 并计划在未来几年逐步淘汰它，作为替代方案，他们推荐使用@use规则。详细原因请参考https://sass-lang.com/documentation/at-rules/import。
/* button.scss */ $name: v-; @mixin configure($name: $name) { @if $name { $name: $name !"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="组件间样式隔离的几种方案"><meta name=twitter:description content="CSS 即层叠样式表(Cascading Style Sheets）是一种样式表语言，它没有作用域的概念，引入即全局生效的，但一个样式是否起作用由多个因素共同决定，比如：
重要程度 优先级 样式加载顺序 所以当我们在页面中使用时可能会遇到组件间的样式互相影响的情况，特别是引入了多个组件库或者类名命名不规范时，我们就需要对样式进行隔离，这样就可以避免样式冲突。下面我介绍几种方案： 类名添加特定的前缀 一般来说，我们会在组件内部使用一个特定的前缀，避免组件之间的样式冲突。比如 antd 的组件内部的样式，都会使用ant-前缀，element-ui 的组件内部的样式，都会使用el-前缀。 由于原生 css 的功能太弱鸡了, 我们在实际开发中一般使用 css 预处理框架如 less, sass 等，对于这种我们也可以使用一个类似的功能。
对于 less // button.less @name: v-; .@{name}button { background-color: green; } // 编译为 // .v-button { // background-color: green; // } 重写前缀
@import &#34;button.less&#34;; @name: k-; // 编译为 // .k-button { // background-color: green; // } 对于 sass sass 目前版本支持与 less 类似的写法，但是 Sass 团队不鼓励继续使用@import规则。 并计划在未来几年逐步淘汰它，作为替代方案，他们推荐使用@use规则。详细原因请参考https://sass-lang.com/documentation/at-rules/import。
/* button.scss */ $name: v-; @mixin configure($name: $name) { @if $name { $name: $name !"><meta property="og:title" content="组件间样式隔离的几种方案"><meta property="og:description" content="CSS 即层叠样式表(Cascading Style Sheets）是一种样式表语言，它没有作用域的概念，引入即全局生效的，但一个样式是否起作用由多个因素共同决定，比如：
重要程度 优先级 样式加载顺序 所以当我们在页面中使用时可能会遇到组件间的样式互相影响的情况，特别是引入了多个组件库或者类名命名不规范时，我们就需要对样式进行隔离，这样就可以避免样式冲突。下面我介绍几种方案： 类名添加特定的前缀 一般来说，我们会在组件内部使用一个特定的前缀，避免组件之间的样式冲突。比如 antd 的组件内部的样式，都会使用ant-前缀，element-ui 的组件内部的样式，都会使用el-前缀。 由于原生 css 的功能太弱鸡了, 我们在实际开发中一般使用 css 预处理框架如 less, sass 等，对于这种我们也可以使用一个类似的功能。
对于 less // button.less @name: v-; .@{name}button { background-color: green; } // 编译为 // .v-button { // background-color: green; // } 重写前缀
@import &#34;button.less&#34;; @name: k-; // 编译为 // .k-button { // background-color: green; // } 对于 sass sass 目前版本支持与 less 类似的写法，但是 Sass 团队不鼓励继续使用@import规则。 并计划在未来几年逐步淘汰它，作为替代方案，他们推荐使用@use规则。详细原因请参考https://sass-lang.com/documentation/at-rules/import。
/* button.scss */ $name: v-; @mixin configure($name: $name) { @if $name { $name: $name !"><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/css/css-web-compoent-isolation/"><meta property="article:section" content="css"><meta property="article:published_time" content="2022-02-09T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-05T19:04:46+08:00"><title>组件间样式隔离的几种方案 · CK's Blog</title><link rel=canonical href=https://chenkai.life/css/css-web-compoent-isolation/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.56610f8c63ea4ca06cdac03f4fafe3e818c64566f988301b72895eb047082c51.css integrity="sha256-VmEPjGPqTKBs2sA/T6/j6BjGRWb5iDAbcolesEcILFE=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicon.ico><link rel=apple-touch-icon type=image/png sizes=256x256 href=/images/favicon-512x512.png><meta name=generator content="Hugo 0.112.7"><link rel=manifest href=/manifest.webmanifest></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><details id=table-of-contents-wapper><summary><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></summary></details><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/marks/>Marks</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/ckvv/ckvv.github.io/tree/main/content>Create</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=github>GitHub</button>
<button class=search-btn data-type=google>Google</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/css/css-web-compoent-isolation/>组件间样式隔离的几种方案</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title rel=noopener target=_blank href=https://github.com/ckvv/ckvv.github.io/edit/main/content/css/css-web-compoent-isolation.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2022-02-09T00:00:00Z>2022-02-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/css/>CSS</a></span></div></div><p>CSS 即层叠样式表(Cascading Style Sheets）是一种样式表语言，它没有作用域的概念，引入即全局生效的，但一个样式是否起作用由多个因素共同决定，比如：</p><ul><li>重要程度</li><li>优先级</li><li>样式加载顺序
所以当我们在页面中使用时可能会遇到组件间的样式互相影响的情况，特别是引入了多个组件库或者类名命名不规范时，我们就需要对样式进行隔离，这样就可以避免样式冲突。下面我介绍几种方案：</li></ul><h1 id=类名添加特定的前缀>类名添加特定的前缀
<a class=heading-link href=#%e7%b1%bb%e5%90%8d%e6%b7%bb%e5%8a%a0%e7%89%b9%e5%ae%9a%e7%9a%84%e5%89%8d%e7%bc%80><i class="fa fa-link" aria-hidden=true></i></a></h1><p>一般来说，我们会在组件内部使用一个特定的前缀，避免组件之间的样式冲突。比如 antd 的组件内部的样式，都会使用<code>ant-</code>前缀，element-ui 的组件内部的样式，都会使用<code>el-</code>前缀。 由于原生 css 的功能太弱鸡了, 我们在实际开发中一般使用 css 预处理框架如 less, sass 等，对于这种我们也可以使用一个类似的功能。</p><h2 id=对于-less>对于 less
<a class=heading-link href=#%e5%af%b9%e4%ba%8e-less><i class="fa fa-link" aria-hidden=true></i></a></h2><pre tabindex=0><code class=language-less data-lang=less>// button.less
@name: v-;

.@{name}button {
  background-color: green;
}

// 编译为
// .v-button {
//   background-color: green;
// }
</code></pre><p>重写前缀</p><pre tabindex=0><code class=language-less data-lang=less>@import &#34;button.less&#34;;
@name: k-;

// 编译为
// .k-button {
//   background-color: green;
// }
</code></pre><h2 id=对于-sass>对于 sass
<a class=heading-link href=#%e5%af%b9%e4%ba%8e-sass><i class="fa fa-link" aria-hidden=true></i></a></h2><p>sass 目前版本支持与 less 类似的写法，但是 Sass 团队不鼓励继续使用<code>@import</code>规则。 并计划在未来几年逐步淘汰它，作为替代方案，他们推荐使用<code>@use</code>规则。详细原因请参考<a href=https://sass-lang.com/documentation/at-rules/import>https://sass-lang.com/documentation/at-rules/import</a>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#75715e>/* button.scss */</span>
</span></span><span style=display:flex><span>$name<span style=color:#f92672>:</span> v-;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@mixin</span><span style=color:#a6e22e> configure</span>($name<span style=color:#f92672>:</span> $name) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>@if</span> $name {
</span></span><span style=display:flex><span>    $name<span style=color:#f92672>:</span> $name <span style=color:#66d9ef>!global</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@mixin</span><span style=color:#a6e22e> styles</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>.</span><span style=color:#e6db74>#{</span>$name<span style=color:#e6db74>}</span><span style=color:#a6e22e>button</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background-color</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>green</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>重写前缀</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#66d9ef>@use</span> <span style=color:#e6db74>&#34;./button.scss&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@include</span><span style=color:#a6e22e> button</span><span style=color:#f92672>.</span><span style=color:#a6e22e>configure</span>($name<span style=color:#f92672>:</span> k-);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@include</span><span style=color:#a6e22e> button</span><span style=color:#f92672>.</span>styles;
</span></span></code></pre></div><h1 id=css-in-js>CSS in JS
<a class=heading-link href=#css-in-js><i class="fa fa-link" aria-hidden=true></i></a></h1><p>CSS-in-JS 就是将应用的 CSS 样式写在 JavaScript 文件里面, 这样你就可以在 CSS 中使用一些属于 JS 的诸如模块声明，变量定义，函数调用和条件判断等语言特性来提供灵活的可扩展的样式定义。CIJ 还没有形成真正的标准，但在接口 API 设计、功能或是使用体验上，不同的实现方案越来越接近，其中最受欢迎的解决方案是 styled-components(styled-components 本身是为 React 设计的,可以使用 vue-styled-components 替代)，它删除了组件和样式之间的映射。这意味着当你定义你的样式时，你实际上是在创建一个普通的 React 组件，它附加了你的样式。并为你的样式生成唯一的类名，<code>CSS-in-JS</code>在 VUE 中用的较少，因为 VUE 本身提供了类似的组件隔离样式的解决方案，但是在 React 中，它是一个很好的解决方案。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#75715e>// The Button from the last section without the interpolations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>styled</span>.<span style=color:#a6e22e>button</span><span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  color: palevioletred;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  font-size: 1em;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  margin: 1em;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  padding: 0.25em 1em;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  border: 2px solid palevioletred;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  border-radius: 3px;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A new component based on Button, but with some override styles
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TomatoButton</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>styled</span>(<span style=color:#a6e22e>Button</span>)<span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  color: tomato;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  border-color: tomato;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Button</span>&gt;<span style=color:#a6e22e>Normal</span> <span style=color:#a6e22e>Button</span>&lt;/<span style=color:#f92672>Button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TomatoButton</span>&gt;<span style=color:#a6e22e>Tomato</span> <span style=color:#a6e22e>Button</span>&lt;/<span style=color:#f92672>TomatoButton</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h1 id=scoped-css>Scoped CSS
<a class=heading-link href=#scoped-css><i class="fa fa-link" aria-hidden=true></i></a></h1><p>在 VUE 中有<code>Scoped</code> CSS 的概念，当 <code>&lt;style></code> 标签有 scoped 属性时，它的 CSS 只作用于当前组件中的元素。这类似于 Shadow DOM 中的样式封装。通过对组件添加<a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/data-*>数据属性</a>,然后在 style 中使用<a href=https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors>属性选择器</a>让组件的样式只作用于组件。它通过使用 PostCSS 来实现以下转换：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>scoped</span>&gt;
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>example</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;example&#34;</span>&gt;hi&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>转换结果</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>example</span><span style=color:#f92672>[</span><span style=color:#f92672>data-v-f3f3eg9</span><span style=color:#f92672>]</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;example&#34;</span> <span style=color:#a6e22e>data-v-f3f3eg9</span>&gt;hi&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>详情参考<a href=https://VUE-loader.vuejs.org/zh/guide/scoped-css.html#scoped-css>https://VUE-loader.vuejs.org/zh/guide/scoped-css.html#scoped-css</a></p><h1 id=css-modules>CSS Modules
<a class=heading-link href=#css-modules><i class="fa fa-link" aria-hidden=true></i></a></h1><p><a href=https://github.com/css-modules/css-modules>CSS Modules</a> 是一个流行的，用于模块化和组合 CSS 的系统.</p><p>VUE 3 原生支持了<code>CSS Modules</code>,通过在你的 <code>&lt;style></code> 上添加 module 特性, 这个 module 特性指引 Vue Loader 作为名为 $style 的计算属性，向组件注入 CSS Modules 局部对象。它将类名编译成一个独一无二的哈希字符串，来保证样式只在组件内生效。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$style.red&#34;</span>&gt;This should be red&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$style.red&#34;</span>&gt;This should be red&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$style.bold&#34;</span>&gt;This should be bold&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>module</span>&gt;
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>red</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>bold</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-weight</span>: <span style=color:#66d9ef>bold</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span></code></pre></div><p>转换结果</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_red_1cpg3_4&#34;</span>&gt;This should be red&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_red_1cpg3_4&#34;</span>&gt;This should be red&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_bold_1cpg3_7&#34;</span>&gt;This should be bold&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>style</span>&gt;
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>_red_1cpg3_4</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>_bold_1cpg3_7</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-weight</span>: <span style=color:#66d9ef>bold</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span></code></pre></div><h1 id=使用-shadow-dom>使用 shadow DOM
<a class=heading-link href=#%e4%bd%bf%e7%94%a8-shadow-dom><i class="fa fa-link" aria-hidden=true></i></a></h1><p>不同与 VUE,React, Web 提供了一个标准的组件模型 Web Components,它将标元素、样式和行为封装起来，并与页面上的其他代码相隔离，保证不同的部分不会混在一起， 如下面使用 Web Components 创建一个 button</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>customElements</span>.<span style=color:#a6e22e>define</span>(
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;my-button&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>HTMLElement</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>super</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>shadow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>attachShadow</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;open&#34;</span>,
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>wrapper</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;button&#34;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>wrapper</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Button&#34;</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>style</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#34;style&#34;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>textContent</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      button {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        color: #0B8BF4;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        border-radius: 4px;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    `</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shadow</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>style</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shadow</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>wrapper</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h1 id=原子化-css>原子化 CSS
<a class=heading-link href=#%e5%8e%9f%e5%ad%90%e5%8c%96-css><i class="fa fa-link" aria-hidden=true></i></a></h1><p>原子化 CSS 是一种 CSS 的架构方式，它倾向于预先定义小巧且用途单一的 class，并且会以视觉效果进行命名。然后扫描代码中的 class 按照使用到的 class 样式提取出来，并且把它们放到一个单独的文件中。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HTML data-lang=HTML><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-0 text-red&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>m-0</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>text-red</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在使用这种方案时，组件会很少需要使用到自定义的样式,所以也就不用关心样式冲突的问题了。</p><div id=cusdis_thread data-host=https://cusdis.com data-app-id=c2b015f9-9a4b-4997-b66f-f9c6ca26ebdd data-page-id=315c984cecd9a282b83b429fd4de9c5b data-page-url=https://chenkai.life/css/css-web-compoent-isolation/ data-page-title=组件间样式隔离的几种方案 data-iframe=/js/cusdis/iframe.umd.js data-style=/js/cusdis/style.css></div></article></section></div></main><script src=/js/coder.min.cb0c595e02234420f3ad3886bf4a9bd2874d0e1e78e090138a9ef158b35aaf17.js integrity="sha256-ywxZXgIjRCDzrTiGv0qb0odNDh544JATip7xWLNarxc="></script>
<script src=/js/custom.js></script>
<script src=/js/font.min.js></script></body><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></html>