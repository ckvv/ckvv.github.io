<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="什么是原型链    首先我们需要知道什么是原型，在javascript中，函数可以有属性。 每个函数都有一个特殊的属性叫作原型（prototype）,我们可以添加一些属性到原型上面,然后，我们可以使用 new 运算符来在现在的这个原型基础之上，创建一个的实例。每个实例对象都有一个私有属性（称之为 proto ）指向它的构造函数的原型对象（prototype ）. 当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或到达原型链的末尾。
如何利用原型链实现继承    假设这里有两个类
// 交通工具 function Transportation(name){ this.name = name; // 该属性没有定义到原型链上,可以通过Object.keys获取  this.say = function(){ console.log(`Transportation： ${this.name}是交通工具`); } } Object.assign(Transportation.prototype,{ move : function (){ console.log(`Transportation: ${this.name}会移动`); }, }); // 汽车 function Car(name){ // 调用Transportation构造函数，绑定this变量 我们也可以  // this.name = name;  Transportation.call(this, name); } 此时Car的原型是
new Car() ----> Car.prototype ----> Object.prototype ----> null 要实现继承我们需要将该对象的原型指向要继承对象的原型，如
new Car() ----> Car."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="js的prototype"><meta name=twitter:description content="什么是原型链    首先我们需要知道什么是原型，在javascript中，函数可以有属性。 每个函数都有一个特殊的属性叫作原型（prototype）,我们可以添加一些属性到原型上面,然后，我们可以使用 new 运算符来在现在的这个原型基础之上，创建一个的实例。每个实例对象都有一个私有属性（称之为 proto ）指向它的构造函数的原型对象（prototype ）. 当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或到达原型链的末尾。
如何利用原型链实现继承    假设这里有两个类
// 交通工具 function Transportation(name){ this.name = name; // 该属性没有定义到原型链上,可以通过Object.keys获取  this.say = function(){ console.log(`Transportation： ${this.name}是交通工具`); } } Object.assign(Transportation.prototype,{ move : function (){ console.log(`Transportation: ${this.name}会移动`); }, }); // 汽车 function Car(name){ // 调用Transportation构造函数，绑定this变量 我们也可以  // this.name = name;  Transportation.call(this, name); } 此时Car的原型是
new Car() ----> Car.prototype ----> Object.prototype ----> null 要实现继承我们需要将该对象的原型指向要继承对象的原型，如
new Car() ----> Car."><meta property="og:title" content="js的prototype"><meta property="og:description" content="什么是原型链    首先我们需要知道什么是原型，在javascript中，函数可以有属性。 每个函数都有一个特殊的属性叫作原型（prototype）,我们可以添加一些属性到原型上面,然后，我们可以使用 new 运算符来在现在的这个原型基础之上，创建一个的实例。每个实例对象都有一个私有属性（称之为 proto ）指向它的构造函数的原型对象（prototype ）. 当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或到达原型链的末尾。
如何利用原型链实现继承    假设这里有两个类
// 交通工具 function Transportation(name){ this.name = name; // 该属性没有定义到原型链上,可以通过Object.keys获取  this.say = function(){ console.log(`Transportation： ${this.name}是交通工具`); } } Object.assign(Transportation.prototype,{ move : function (){ console.log(`Transportation: ${this.name}会移动`); }, }); // 汽车 function Car(name){ // 调用Transportation构造函数，绑定this变量 我们也可以  // this.name = name;  Transportation.call(this, name); } 此时Car的原型是
new Car() ----> Car.prototype ----> Object.prototype ----> null 要实现继承我们需要将该对象的原型指向要继承对象的原型，如
new Car() ----> Car."><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/javascript/js_prototype/"><meta property="article:published_time" content="2021-07-09T15:37:56+08:00"><meta property="article:modified_time" content="2021-07-09T15:37:56+08:00"><title>js的prototype · CK's Blog</title><link rel=canonical href=https://chenkai.life/javascript/js_prototype/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.c4f230ef1665cf62f1ce7049f2091eb8f6f1ea3f175955823688667a55c4b39a.css integrity="sha256-xPIw7xZlz2LxznBJ8gkeuPbx6j8XWVWCNohmelXEs5o=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.72.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/index.xml>RSS</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=google>Google</button>
<button class=search-btn data-type=github>GitHub</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/javascript/js_prototype/>js的prototype</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title target=_blank href=https://github.com/chenkai0520/chenkai0520.github.io/edit/main/content/javascript/js_prototype.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2021-07-09T15:37:56+08:00>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/js/>js</a></span></div></div><h2 id=什么是原型链>什么是原型链
<a class=heading-link href=#%e4%bb%80%e4%b9%88%e6%98%af%e5%8e%9f%e5%9e%8b%e9%93%be><i class="fa fa-link" aria-hidden=true></i></a></h2><p>首先我们需要知道什么是原型，在javascript中，函数可以有属性。 每个函数都有一个特殊的属性叫作原型（prototype）,我们可以添加一些属性到原型上面,然后，我们可以使用 new 运算符来在现在的这个原型基础之上，创建一个的实例。每个实例对象都有一个私有属性（称之为 <strong>proto</strong> ）指向它的构造函数的原型对象（prototype ）.
当试图访问一个对象的属性时，它不仅仅在该对象上搜寻，还会搜寻该对象的原型，以及该对象的原型的原型，依次层层向上搜索，直到找到一个名字匹配的属性或到达原型链的末尾。</p><h2 id=如何利用原型链实现继承>如何利用原型链实现继承
<a class=heading-link href=#%e5%a6%82%e4%bd%95%e5%88%a9%e7%94%a8%e5%8e%9f%e5%9e%8b%e9%93%be%e5%ae%9e%e7%8e%b0%e7%bb%a7%e6%89%bf><i class="fa fa-link" aria-hidden=true></i></a></h2><p>假设这里有两个类</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// 交通工具
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Transportation</span>(<span style=color:#a6e22e>name</span>){
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;

    <span style=color:#75715e>// 该属性没有定义到原型链上,可以通过Object.keys获取
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>say</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(){
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Transportation： </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span><span style=color:#e6db74>}</span><span style=color:#e6db74>是交通工具`</span>);
    }
}

Object.<span style=color:#a6e22e>assign</span>(<span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>,{
    <span style=color:#a6e22e>move</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> (){
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Transportation: </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span><span style=color:#e6db74>}</span><span style=color:#e6db74> 会移动`</span>);
    },
});


<span style=color:#75715e>// 汽车
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Car</span>(<span style=color:#a6e22e>name</span>){
    <span style=color:#75715e>// 调用Transportation构造函数，绑定this变量 我们也可以
</span><span style=color:#75715e></span>    <span style=color:#75715e>// this.name = name;
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>call</span>(<span style=color:#66d9ef>this</span>, <span style=color:#a6e22e>name</span>);
}
</code></pre></div><p>此时Car的原型是</p><pre><code>new Car() ----&gt; Car.prototype ----&gt; Object.prototype ----&gt; null
</code></pre><p>要实现继承我们需要将该对象的原型指向要继承对象的原型，如</p><pre><code>new Car() ----&gt; Car.prototype ----&gt; Transportation.prototype ----&gt; Object.prototype ----&gt; null
</code></pre><p>你可能会想到</p><pre><code>Car.prototype = Transportation.prototype;
</code></pre><p>这样的确可以使用Transportation上面的属性，但是还存在了两个问题</p><ul><li>此时car和Transportation共享一个原型对象，我们对Car原型添加的属性也会添加到Transportation上面</li><li>Car的构造函数指向的是Transportation的构造函数，这些都是不正确的。
如下所示：</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>
<span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>;

<span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span>.<span style=color:#a6e22e>run</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(){
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`run:</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span><span style=color:#e6db74>}</span><span style=color:#e6db74>,</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>constructor</span>.<span style=color:#a6e22e>name</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
};

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>car</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Car</span>(<span style=color:#e6db74>&#39;car&#39;</span>);
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>transportation</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Transportation</span>(<span style=color:#e6db74>&#39;Transportation&#39;</span>);

<span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>move</span>(); <span style=color:#75715e>//Transportation: car 会移动
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>run</span>();<span style=color:#75715e>//run:car,Transportation
</span><span style=color:#75715e></span><span style=color:#a6e22e>transportation</span>.<span style=color:#a6e22e>run</span>();<span style=color:#75715e>//run:Transportation,Transportation
</span></code></pre></div><p>针对第一个问题，我们可以创建一个新对象，等于Transportation.prototype，把Car.prototype指向该对象,这里有很多种方式</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>//1
</span><span style=color:#75715e>// Object.create()方法使用现有对象作为新创建的对象的原型来创建新对象
</span><span style=color:#75715e></span><span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> Object.<span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>);


<span style=color:#75715e>//2
</span><span style=color:#75715e>// 空函数F:
</span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>F</span>() {}
<span style=color:#75715e>// 把F的原型指向Student.prototype:
</span><span style=color:#75715e></span><span style=color:#a6e22e>F</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>;
<span style=color:#75715e>// 把PrimaryStudent的原型指向一个新的F对象，F对象的原型正好指向Student.prototype:
</span><span style=color:#75715e></span><span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>F</span>();
<span style=color:#75715e>// 或者
</span><span style=color:#75715e>// 需要先初始化
</span><span style=color:#75715e></span><span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Transportation</span>()


<span style=color:#75715e>//3
</span><span style=color:#75715e>//将指定对象的原型（即内部[[Prototype]]属性）设置为另一个对象或为null。
</span><span style=color:#75715e></span>Object.<span style=color:#a6e22e>setPrototypeOf</span>(<span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span>,<span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>)
<span style=color:#75715e>//或者
</span><span style=color:#75715e></span><span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> Object.<span style=color:#a6e22e>setPrototypeOf</span>({},<span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>)


<span style=color:#75715e>//4
</span><span style=color:#75715e></span><span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>__proto__</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>
}


<span style=color:#75715e>// 验证原型:
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>__proto__</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>__proto__</span>.<span style=color:#a6e22e>__proto__</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span>
<span style=color:#75715e>// 验证继承关系:
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>Car</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>Transportation</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span>
</code></pre></div><p>针对第二个问题</p><pre><code>Car.prototype.constructor = Car;
</code></pre><h2 id=tip>tip
<a class=heading-link href=#tip><i class="fa fa-link" aria-hidden=true></i></a></h2><p>通过下面这种方式方法属性都可以使用，但是原型链不正确</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#75715e>// new Car() ----&gt; Car.prototype ----&gt; Object.prototype ----&gt; null
</span><span style=color:#75715e></span>
<span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span> <span style=color:#f92672>=</span> Object.<span style=color:#a6e22e>assign</span>(<span style=color:#a6e22e>Transportation</span>,<span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>);

<span style=color:#75715e>// 验证原型:
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>__proto__</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Car</span>.<span style=color:#a6e22e>prototype</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span>.<span style=color:#a6e22e>__proto__</span>.<span style=color:#a6e22e>__proto__</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>Transportation</span>.<span style=color:#a6e22e>prototype</span>; <span style=color:#75715e>// false
</span><span style=color:#75715e></span>
<span style=color:#75715e>// 验证继承关系:
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>Car</span>; <span style=color:#75715e>// true
</span><span style=color:#75715e></span><span style=color:#a6e22e>car</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>Transportation</span>; <span style=color:#75715e>// false
</span></code></pre></div><div id=vcomments></div></article></section></div></main><script src=/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body></html>