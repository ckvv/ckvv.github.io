<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=description content="你可以在支持添加新属性的任何标准的内置对象或用户定义的对象内定义getter(访问方法)和setter(设置方法)。使用对象字面量语法定义getters和setters方法。
get    get语法将对象属性绑定到查询该属性时将被调用的函数,有时需要允许访问返回动态计算值的属性，或者你可能需要反映内部变量的状态，而不需要使用显式方法调用。在JavaScript中，可以使用 getter 来实现。虽然可以使用 getter 和 setter 来创建一个伪属性类型，但是不可能同时将一个 getter 绑定到一个属性并且该属性实际上具有一个值
使用get语法时应注意以下问题：
 可以使用数值或字符串作为标识； 必须不带参数； 它不能与另一个 get 或具有相同属性的数据条目同时出现在一个对象字面量中（不允许使用 { get x() { }, get x() { } } 和 { x: &mldr;, get x() { } }）。 可通过 delete 操作符删除 getter。  在新对象初始化时定义一个getter    这会为obj创建一个伪属性latest，它会返回log数组的最后一个元素,注意，尝试为latest分配一个值不会改变它。
var obj = { log: ['a', 'b', 'c'], get latest() { if (this.log.length == 0) { return undefined; } return this."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="get和set"><meta name=twitter:description content="你可以在支持添加新属性的任何标准的内置对象或用户定义的对象内定义getter(访问方法)和setter(设置方法)。使用对象字面量语法定义getters和setters方法。
get    get语法将对象属性绑定到查询该属性时将被调用的函数,有时需要允许访问返回动态计算值的属性，或者你可能需要反映内部变量的状态，而不需要使用显式方法调用。在JavaScript中，可以使用 getter 来实现。虽然可以使用 getter 和 setter 来创建一个伪属性类型，但是不可能同时将一个 getter 绑定到一个属性并且该属性实际上具有一个值
使用get语法时应注意以下问题：
 可以使用数值或字符串作为标识； 必须不带参数； 它不能与另一个 get 或具有相同属性的数据条目同时出现在一个对象字面量中（不允许使用 { get x() { }, get x() { } } 和 { x: &mldr;, get x() { } }）。 可通过 delete 操作符删除 getter。  在新对象初始化时定义一个getter    这会为obj创建一个伪属性latest，它会返回log数组的最后一个元素,注意，尝试为latest分配一个值不会改变它。
var obj = { log: ['a', 'b', 'c'], get latest() { if (this.log.length == 0) { return undefined; } return this."><meta property="og:title" content="get和set"><meta property="og:description" content="你可以在支持添加新属性的任何标准的内置对象或用户定义的对象内定义getter(访问方法)和setter(设置方法)。使用对象字面量语法定义getters和setters方法。
get    get语法将对象属性绑定到查询该属性时将被调用的函数,有时需要允许访问返回动态计算值的属性，或者你可能需要反映内部变量的状态，而不需要使用显式方法调用。在JavaScript中，可以使用 getter 来实现。虽然可以使用 getter 和 setter 来创建一个伪属性类型，但是不可能同时将一个 getter 绑定到一个属性并且该属性实际上具有一个值
使用get语法时应注意以下问题：
 可以使用数值或字符串作为标识； 必须不带参数； 它不能与另一个 get 或具有相同属性的数据条目同时出现在一个对象字面量中（不允许使用 { get x() { }, get x() { } } 和 { x: &mldr;, get x() { } }）。 可通过 delete 操作符删除 getter。  在新对象初始化时定义一个getter    这会为obj创建一个伪属性latest，它会返回log数组的最后一个元素,注意，尝试为latest分配一个值不会改变它。
var obj = { log: ['a', 'b', 'c'], get latest() { if (this.log.length == 0) { return undefined; } return this."><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/javascript/js_get_and_set/"><meta property="article:published_time" content="2021-07-09T15:37:56+08:00"><meta property="article:modified_time" content="2021-07-09T15:37:56+08:00"><title>get和set · CK's Blog</title><link rel=canonical href=https://chenkai.life/javascript/js_get_and_set/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.ffed55576b1fe8cd1a532c3c9691900c09813ce5a8e0fbf58a6e377169305cf3.css integrity="sha256-/+1VV2sf6M0aUyw8lpGQDAmBPOWo4Pv1im43cWkwXPM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.72.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/index.xml>RSS</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=google>Google</button>
<button class=search-btn data-type=github>GitHub</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/javascript/js_get_and_set/>get和set</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title target=_blank href=https://github.com/chenkai0520/chenkai0520.github.io/edit/main/content/javascript/js_get_and_set.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2021-07-09T15:37:56+08:00>2021-07-09</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/js/>js</a></span></div></div><p>你可以在支持添加新属性的任何标准的内置对象或用户定义的对象内定义getter(访问方法)和setter(设置方法)。使用对象字面量语法定义getters和setters方法。</p><h2 id=get>get
<a class=heading-link href=#get><i class="fa fa-link" aria-hidden=true></i></a></h2><p>get语法将对象属性绑定到查询该属性时将被调用的函数,有时需要允许访问返回动态计算值的属性，或者你可能需要反映内部变量的状态，而不需要使用显式方法调用。在JavaScript中，可以使用 getter 来实现。虽然可以使用 getter 和 setter 来创建一个伪属性类型，但是不可能同时将一个 getter 绑定到一个属性并且该属性实际上具有一个值</p><p>使用get语法时应注意以下问题：</p><ul><li>可以使用数值或字符串作为标识；</li><li>必须不带参数；</li><li>它不能与另一个 get 或具有相同属性的数据条目同时出现在一个对象字面量中（不允许使用 { get x() { }, get x() { } } 和 { x: &mldr;, get x() { } }）。
可通过 delete 操作符删除 getter。</li></ul><h2 id=在新对象初始化时定义一个getter>在新对象初始化时定义一个getter
<a class=heading-link href=#%e5%9c%a8%e6%96%b0%e5%af%b9%e8%b1%a1%e5%88%9d%e5%a7%8b%e5%8c%96%e6%97%b6%e5%ae%9a%e4%b9%89%e4%b8%80%e4%b8%aagetter><i class="fa fa-link" aria-hidden=true></i></a></h2><p>这会为obj创建一个伪属性latest，它会返回log数组的最后一个元素,注意，尝试为latest分配一个值不会改变它。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>obj</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>log</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#e6db74>&#39;b&#39;</span>, <span style=color:#e6db74>&#39;c&#39;</span>],
  <span style=color:#a6e22e>get</span> <span style=color:#a6e22e>latest</span>() {
    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>undefined</span>;
    }
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>log</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>];
  }
}
<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>latest</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;test&#39;</span>;
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>latest</span>);
<span style=color:#75715e>// expected output: &#34;c&#34;
</span></code></pre></div><h2 id=使用delete操作符删除-getter>使用delete操作符删除 getter
<a class=heading-link href=#%e4%bd%bf%e7%94%a8delete%e6%93%8d%e4%bd%9c%e7%ac%a6%e5%88%a0%e9%99%a4-getter><i class="fa fa-link" aria-hidden=true></i></a></h2><pre><code>delete obj.latest;
</code></pre><h2 id=使用计算属性名>使用计算属性名
<a class=heading-link href=#%e4%bd%bf%e7%94%a8%e8%ae%a1%e7%ae%97%e5%b1%9e%e6%80%a7%e5%90%8d><i class="fa fa-link" aria-hidden=true></i></a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>expr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;foo&#39;</span>;
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>obj</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>get</span> [<span style=color:#a6e22e>expr</span>]() { <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;bar&#39;</span>; }
};
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>foo</span>); <span style=color:#75715e>// &#34;bar&#34;
</span></code></pre></div><h2 id=smart--self-overwriting--lazy-getters>Smart / self-overwriting / lazy getters
<a class=heading-link href=#smart--self-overwriting--lazy-getters><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Getters 给你一种方法来定义一个对象的属性，但是在访问它们之前不会计算属性的值。 getter 延续计算值的成本，直到需要值，如果不需要，您就不用支付成本。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>obj</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>get</span> <span style=color:#a6e22e>divs</span>() {
      <span style=color:#66d9ef>delete</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>divs</span>;
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>divs</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByTagName</span>(<span style=color:#e6db74>&#39;div&#39;</span>);
  }
}
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>divs</span>);
</code></pre></div><h2 id=set>set
<a class=heading-link href=#set><i class="fa fa-link" aria-hidden=true></i></a></h2><p>当尝试设置属性时，set语法将对象属性绑定到要调用的函数。</p><p>{set prop(val) { . . . }}
{set <a href=val>expression</a> { . . . }}</p><pre><code>+ `prop`要绑定到给定函数的属性名。
+ `val`用于保存尝试分配给prop的值的变量的一个别名。
+ `expression`从 ECMAScript 2015 开始，还可以使用一个计算属性名的表达式绑定到给定的函数。

## 用 delete 操作符移除一个 setter

```js
delete peo.name
</code></pre><h2 id=在对象初始化时定义-setter>在对象初始化时定义 setter
<a class=heading-link href=#%e5%9c%a8%e5%af%b9%e8%b1%a1%e5%88%9d%e5%a7%8b%e5%8c%96%e6%97%b6%e5%ae%9a%e4%b9%89-setter><i class="fa fa-link" aria-hidden=true></i></a></h2><p>这将定义一个对象 language 的伪属性current，当分配一个值时，将使用该值更新log：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>language</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>set</span> <span style=color:#a6e22e>current</span>(<span style=color:#a6e22e>name</span>) {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>name</span>);
  },
  <span style=color:#a6e22e>log</span><span style=color:#f92672>:</span> []
}

<span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>current</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;EN&#39;</span>;
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>log</span>); <span style=color:#75715e>// [&#39;EN&#39;]
</span><span style=color:#75715e></span>
<span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>current</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;FA&#39;</span>;
<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>language</span>.<span style=color:#a6e22e>log</span>); <span style=color:#75715e>// [&#39;EN&#39;, &#39;FA&#39;]
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>peo</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>set</span> <span style=color:#a6e22e>name</span>(<span style=color:#a6e22e>val</span>){
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`set name: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>val</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
    },
    <span style=color:#a6e22e>set</span> <span style=color:#a6e22e>age</span>(<span style=color:#a6e22e>val</span>){
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`set age: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>val</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
    }
}
<span style=color:#a6e22e>peo</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;hello&#39;</span>;
<span style=color:#a6e22e>peo</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;world&#39;</span>;
<span style=color:#a6e22e>peo</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>16</span>;
</code></pre></div><h2 id=使用-defineproperty-为当前对象定义-setter>使用 defineProperty 为当前对象定义 setter
<a class=heading-link href=#%e4%bd%bf%e7%94%a8-defineproperty-%e4%b8%ba%e5%bd%93%e5%89%8d%e5%af%b9%e8%b1%a1%e5%ae%9a%e4%b9%89-setter><i class="fa fa-link" aria-hidden=true></i></a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>o</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>a</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span> };

Object.<span style=color:#a6e22e>defineProperty</span>(<span style=color:#a6e22e>o</span>, <span style=color:#e6db74>&#34;b&#34;</span>, { <span style=color:#a6e22e>set</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>x</span>) { <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>; } });

<span style=color:#a6e22e>o</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>; <span style=color:#75715e>// Runs the setter, which assigns 10 / 2 (5) to the &#39;a&#39; property
</span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>o</span>.<span style=color:#a6e22e>a</span>) <span style=color:#75715e>// 5
</span></code></pre></div><h2 id=使用计算属性名-1>使用计算属性名
<a class=heading-link href=#%e4%bd%bf%e7%94%a8%e8%ae%a1%e7%ae%97%e5%b1%9e%e6%80%a7%e5%90%8d-1><i class="fa fa-link" aria-hidden=true></i></a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>expr</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;foo&#34;</span>;

<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>obj</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>baz</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;bar&#34;</span>,
  <span style=color:#a6e22e>set</span> [<span style=color:#a6e22e>expr</span>](<span style=color:#a6e22e>v</span>) { <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>baz</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>v</span>; }
};

<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>baz</span>); <span style=color:#75715e>// &#34;bar&#34;
</span><span style=color:#75715e></span><span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>foo</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;baz&#34;</span>;      <span style=color:#75715e>// run the setter
</span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>baz</span>); <span style=color:#75715e>// &#34;baz&#34;
</span></code></pre></div><div id=vcomments></div></article></section></div></main><script src=/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script><script src=/js/custom.js></script><script src=/js/font.min.js></script></body></html>