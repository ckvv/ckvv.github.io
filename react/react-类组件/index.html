<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=theme-color content="#ffffff"><meta name=color-scheme content="light dark"><meta name=description content="生命周期 类组件有一系列的生命周期方法，主要分为三个阶段：挂载阶段、更新阶段和卸载阶段
挂载阶段 constructor()： 最早被调用的生命周期方法 通常用于初始化组件的 state 和绑定事件处理方法。 在这个方法中，可以通过将方法绑定到当前组件实例来确保在回调中this指向正确的组件实例。例如：this.handleClick = this.handleClick.bind(this);。
static getDerivedStateFromProps(nextProps, prevState)： 是一个静态方法，在组件实例被创建以及每次接收到新的 props 时被调用。 此方法接收新的 props 和当前的 state 作为参数，并返回一个对象来更新 state，或者返回 null 表示不需要更新 state。 主要用于根据 props 来同步 state，可以用于将 props 的值同步到 state 中，确保组件状态的一致性。
render()： 是 React 类组件中必须定义的方法。 用于返回一个 React 元素，描述组件的 UI 结构。 在这个方法中，不能进行任何有副作用的操作，如直接修改 state、进行异步请求等。它应该是一个纯函数，仅根据输入的 props 和 state 来确定输出的 UI。
componentDidMount()： 在组件挂载到 DOM 后立即被调用。 通常用于在这个阶段进行一些副作用操作，比如发起异步请求获取数据、添加事件监听器等。 因为此时组件已经在 DOM 中渲染完成，可以确保 DOM 操作的安全性。
更新阶段 static getDerivedStateFromProps(nextProps, prevState)： 同样在组件更新时（由于 props 变化或 state 变化导致的重新渲染）会被调用。"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="React 类组件"><meta name=twitter:description content="生命周期 类组件有一系列的生命周期方法，主要分为三个阶段：挂载阶段、更新阶段和卸载阶段
挂载阶段 constructor()： 最早被调用的生命周期方法 通常用于初始化组件的 state 和绑定事件处理方法。 在这个方法中，可以通过将方法绑定到当前组件实例来确保在回调中this指向正确的组件实例。例如：this.handleClick = this.handleClick.bind(this);。
static getDerivedStateFromProps(nextProps, prevState)： 是一个静态方法，在组件实例被创建以及每次接收到新的 props 时被调用。 此方法接收新的 props 和当前的 state 作为参数，并返回一个对象来更新 state，或者返回 null 表示不需要更新 state。 主要用于根据 props 来同步 state，可以用于将 props 的值同步到 state 中，确保组件状态的一致性。
render()： 是 React 类组件中必须定义的方法。 用于返回一个 React 元素，描述组件的 UI 结构。 在这个方法中，不能进行任何有副作用的操作，如直接修改 state、进行异步请求等。它应该是一个纯函数，仅根据输入的 props 和 state 来确定输出的 UI。
componentDidMount()： 在组件挂载到 DOM 后立即被调用。 通常用于在这个阶段进行一些副作用操作，比如发起异步请求获取数据、添加事件监听器等。 因为此时组件已经在 DOM 中渲染完成，可以确保 DOM 操作的安全性。
更新阶段 static getDerivedStateFromProps(nextProps, prevState)： 同样在组件更新时（由于 props 变化或 state 变化导致的重新渲染）会被调用。"><meta property="og:title" content="React 类组件"><meta property="og:description" content="生命周期 类组件有一系列的生命周期方法，主要分为三个阶段：挂载阶段、更新阶段和卸载阶段
挂载阶段 constructor()： 最早被调用的生命周期方法 通常用于初始化组件的 state 和绑定事件处理方法。 在这个方法中，可以通过将方法绑定到当前组件实例来确保在回调中this指向正确的组件实例。例如：this.handleClick = this.handleClick.bind(this);。
static getDerivedStateFromProps(nextProps, prevState)： 是一个静态方法，在组件实例被创建以及每次接收到新的 props 时被调用。 此方法接收新的 props 和当前的 state 作为参数，并返回一个对象来更新 state，或者返回 null 表示不需要更新 state。 主要用于根据 props 来同步 state，可以用于将 props 的值同步到 state 中，确保组件状态的一致性。
render()： 是 React 类组件中必须定义的方法。 用于返回一个 React 元素，描述组件的 UI 结构。 在这个方法中，不能进行任何有副作用的操作，如直接修改 state、进行异步请求等。它应该是一个纯函数，仅根据输入的 props 和 state 来确定输出的 UI。
componentDidMount()： 在组件挂载到 DOM 后立即被调用。 通常用于在这个阶段进行一些副作用操作，比如发起异步请求获取数据、添加事件监听器等。 因为此时组件已经在 DOM 中渲染完成，可以确保 DOM 操作的安全性。
更新阶段 static getDerivedStateFromProps(nextProps, prevState)： 同样在组件更新时（由于 props 变化或 state 变化导致的重新渲染）会被调用。"><meta property="og:type" content="article"><meta property="og:url" content="https://chenkai.life/react/react-%E7%B1%BB%E7%BB%84%E4%BB%B6/"><meta property="article:section" content="react"><meta property="article:published_time" content="2024-08-28T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-28T00:00:00+00:00"><title>React 类组件 · CK's Blog</title><link rel=canonical href=https://chenkai.life/react/react-%E7%B1%BB%E7%BB%84%E4%BB%B6/><link rel=stylesheet href=/css/coder.min.0e0f0ac9929898ae6625ca3789e3f9e2e630ead0a5e0f1fe96c1ba7d8774342c.css integrity="sha256-Dg8KyZKYmK5mJco3ieP54uYw6tCl4PH+lsG6fYd0NCw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.d8f89ef09509afb63b9b2595ee174e53cc51ce02a6f6a2179e1621f9389e4340.css integrity="sha256-2Pie8JUJr7Y7myWV7hdOU8xRzgKm9qIXnhYh+TieQ0A=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.d12542c00c198b6a07ca9ea5981102805aecab0f5dfd5e3273d8c179088712c4.css integrity="sha256-0SVCwAwZi2oHyp6lmBECgFrsqw9d/V4yc9jBeQiHEsQ=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicon.ico><link rel=apple-touch-icon type=image/png sizes=256x256 href=/images/favicon-512x512.png><meta name=generator content="Hugo 0.119.0"><link rel=manifest href=/manifest.webmanifest></head><body class="preload-transitions colorscheme-auto"><div class=float-container><span id=dark-mode-toggle class=colorscheme-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anheimoshi"/></svg></span></div><details id=table-of-contents-wapper><summary><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></summary></details><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>CK's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/>Home</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/marks/>Marks</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/ckvv/ckvv.github.io/tree/main/content>Create</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item id=search-content><input class=search-int type=text placeholder=Search>
<button class=search-btn data-type=github>GitHub</button>
<button class=search-btn data-type=google>Google</button></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://chenkai.life/react/react-%E7%B1%BB%E7%BB%84%E4%BB%B6/>React 类组件</a></h1><div class=edit-link style=float:right;color:#0366d6><a class=title rel=noopener target=_blank href=https://github.com/ckvv/ckvv.github.io/edit/main/content/react/react-%e7%b1%bb%e7%bb%84%e4%bb%b6.md>编辑</a></div></header><div class=post-meta><div class=date><span class=posted-on><svg class="icon" aria-hidden="true"><use xlink:href="#icon-date"/></svg><time datetime=2024-08-28T00:00:00Z>2024-08-28</time></span></div><div class=tags><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"/></svg><span class=tag><a href=/tags/react/>React</a></span></div></div><h1 id=生命周期>生命周期
<a class=heading-link href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f><i class="fa fa-link" aria-hidden=true></i></a></h1><p>类组件有一系列的生命周期方法，主要分为三个阶段：挂载阶段、更新阶段和卸载阶段</p><h2 id=挂载阶段>挂载阶段
<a class=heading-link href=#%e6%8c%82%e8%bd%bd%e9%98%b6%e6%ae%b5><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=constructor>constructor()：
<a class=heading-link href=#constructor><i class="fa fa-link" aria-hidden=true></i></a></h3><p>最早被调用的生命周期方法
通常用于初始化组件的 state 和绑定事件处理方法。
在这个方法中，可以通过将方法绑定到当前组件实例来确保在回调中this指向正确的组件实例。例如：this.handleClick = this.handleClick.bind(this);。</p><h3 id=static-getderivedstatefrompropsnextprops-prevstate>static getDerivedStateFromProps(nextProps, prevState)：
<a class=heading-link href=#static-getderivedstatefrompropsnextprops-prevstate><i class="fa fa-link" aria-hidden=true></i></a></h3><p>是一个静态方法，在组件实例被创建以及每次接收到新的 props 时被调用。
此方法接收新的 props 和当前的 state 作为参数，并返回一个对象来更新 state，或者返回 null 表示不需要更新 state。
主要用于根据 props 来同步 state，可以用于将 props 的值同步到 state 中，确保组件状态的一致性。</p><h3 id=render>render()：
<a class=heading-link href=#render><i class="fa fa-link" aria-hidden=true></i></a></h3><p>是 React 类组件中必须定义的方法。
用于返回一个 React 元素，描述组件的 UI 结构。
在这个方法中，不能进行任何有副作用的操作，如直接修改 state、进行异步请求等。它应该是一个纯函数，仅根据输入的 props 和 state 来确定输出的 UI。</p><h3 id=componentdidmount>componentDidMount()：
<a class=heading-link href=#componentdidmount><i class="fa fa-link" aria-hidden=true></i></a></h3><p>在组件挂载到 DOM 后立即被调用。
通常用于在这个阶段进行一些副作用操作，比如发起异步请求获取数据、添加事件监听器等。
因为此时组件已经在 DOM 中渲染完成，可以确保 DOM 操作的安全性。</p><h2 id=更新阶段>更新阶段
<a class=heading-link href=#%e6%9b%b4%e6%96%b0%e9%98%b6%e6%ae%b5><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=static-getderivedstatefrompropsnextprops-prevstate-1>static getDerivedStateFromProps(nextProps, prevState)：
<a class=heading-link href=#static-getderivedstatefrompropsnextprops-prevstate-1><i class="fa fa-link" aria-hidden=true></i></a></h3><p>同样在组件更新时（由于 props 变化或 state 变化导致的重新渲染）会被调用。</p><h3 id=shouldcomponentupdatenextprops-nextstate>shouldComponentUpdate(nextProps, nextState)：
<a class=heading-link href=#shouldcomponentupdatenextprops-nextstate><i class="fa fa-link" aria-hidden=true></i></a></h3><p>此方法接收新的 props 和新的 state 作为参数。
返回一个布尔值，决定组件是否应该重新渲染。如果返回 false，则组件不会重新渲染，这可以用于性能优化，避免不必要的渲染。</p><h3 id=render-1>render()：
<a class=heading-link href=#render-1><i class="fa fa-link" aria-hidden=true></i></a></h3><p>当组件的 props 或 state 发生变化时，会再次调用render方法来重新生成组件的 UI 结构。</p><h3 id=getsnapshotbeforeupdateprevprops-prevstate>getSnapshotBeforeUpdate(prevProps, prevState)：
<a class=heading-link href=#getsnapshotbeforeupdateprevprops-prevstate><i class="fa fa-link" aria-hidden=true></i></a></h3><p>在更新发生之前被调用，就在组件即将更新但 DOM 还未更新时触发。
这个方法可以返回一个值，这个值会作为参数传递给componentDidUpdate。
通常用于获取更新前的某些 DOM 状态，比如滚动位置等。</p><h3 id=componentdidupdateprevprops-prevstate-snapshot>componentDidUpdate(prevProps, prevState, snapshot)：
<a class=heading-link href=#componentdidupdateprevprops-prevstate-snapshot><i class="fa fa-link" aria-hidden=true></i></a></h3><p>在组件更新完成后立即被调用。
接收先前的 props、先前的 state 和来自getSnapshotBeforeUpdate的 snapshot 参数。
通常用于处理更新后的副作用，比如根据新的数据再次发起异步请求、更新 DOM 元素的位置等。</p><h2 id=卸载阶段>卸载阶段
<a class=heading-link href=#%e5%8d%b8%e8%bd%bd%e9%98%b6%e6%ae%b5><i class="fa fa-link" aria-hidden=true></i></a></h2><h3 id=componentwillunmount>componentWillUnmount()
<a class=heading-link href=#componentwillunmount><i class="fa fa-link" aria-hidden=true></i></a></h3><p>在组件从 DOM 中卸载之前被调用。
用于清理在组件生命周期中创建的副作用，比如取消定时器、移除事件监听器、取消网络请求等，以避免内存泄漏</p><h3 id=错误边界>错误边界
<a class=heading-link href=#%e9%94%99%e8%af%af%e8%be%b9%e7%95%8c><i class="fa fa-link" aria-hidden=true></i></a></h3><h3 id=getderivedstatefromerrorerror>‌getDerivedStateFromError‌(error)
<a class=heading-link href=#getderivedstatefromerrorerror><i class="fa fa-link" aria-hidden=true></i></a></h3><p>这个方法在服务器端渲染期间也被调用，在DOM尚未更新时在“渲染阶段”调用。</p><h1 id=heading><a class=heading-link href=#heading><i class="fa fa-link" aria-hidden=true></i></a></h1><div id=cusdis_thread data-host=https://cusdis.com data-app-id=c2b015f9-9a4b-4997-b66f-f9c6ca26ebdd data-page-id=93b09648765b82ce78aeaa8381a977f8 data-page-url=https://chenkai.life/react/react-%E7%B1%BB%E7%BB%84%E4%BB%B6/ data-page-title="React 类组件" data-iframe=/js/cusdis/iframe.umd.js data-style=/js/cusdis/style.css></div></article></section></div></main><script src=/js/coder.min.cb0c595e02234420f3ad3886bf4a9bd2874d0e1e78e090138a9ef158b35aaf17.js integrity="sha256-ywxZXgIjRCDzrTiGv0qb0odNDh544JATip7xWLNarxc="></script>
<script src=/js/custom.js></script>
<script src=/js/font.min.js></script></body><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></html>