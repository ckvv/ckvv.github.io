<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>js on CK's Blog</title><link>https://chenkai.life/tags/js/</link><description>Recent content in js on CK's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 08 Oct 2021 13:56:23 +0800</lastBuildDate><atom:link href="https://chenkai.life/tags/js/index.xml" rel="self" type="application/rss+xml"/><item><title>JavaScriptå¯é€‰é“¾æ“ä½œç¬¦</title><link>https://chenkai.life/javascript/operators-optional-chaining/</link><pubDate>Fri, 08 Oct 2021 13:56:23 +0800</pubDate><guid>https://chenkai.life/javascript/operators-optional-chaining/</guid><description>å¯é€‰é“¾æ“ä½œç¬¦ å¯é€‰é“¾æ“ä½œç¬¦( ?. )å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œè€Œä¸å¿…æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚?. æ“ä½œç¬¦çš„åŠŸèƒ½ç±»ä¼¼äº . é“¾å¼æ“ä½œç¬¦ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œåœ¨å¼•ç”¨ä¸ºç©º(nullish ) (null æˆ–è€… undefined) çš„æƒ…å†µä¸‹ä¸ä¼šå¼•èµ·é”™è¯¯ï¼Œè¯¥è¡¨è¾¾å¼çŸ­è·¯è¿”å›å€¼æ˜¯ undefinedã€‚ä¸å‡½æ•°è°ƒç”¨ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœç»™å®šçš„å‡½æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› undefinedã€‚
å½“å°è¯•è®¿é—®å¯èƒ½ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§æ—¶ï¼Œå¯é€‰é“¾æ“ä½œç¬¦å°†ä¼šä½¿è¡¨è¾¾å¼æ›´çŸ­ã€æ›´ç®€æ˜ã€‚åœ¨æ¢ç´¢ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹æ—¶ï¼Œå¦‚æœä¸èƒ½ç¡®å®šå“ªäº›å±æ€§å¿…å®šå­˜åœ¨ï¼Œå¯é€‰é“¾æ“ä½œç¬¦ä¹Ÿæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚
è¯­æ³• obj?.prop obj?.[expr] arr?.[index] func?.(args) æè¿° é€šè¿‡è¿æ¥çš„å¯¹è±¡çš„å¼•ç”¨æˆ–å‡½æ•°å¯èƒ½æ˜¯ undefined æˆ– null æ—¶ï¼Œå¯é€‰é“¾æ“ä½œç¬¦æä¾›äº†ä¸€ç§æ–¹æ³•æ¥ç®€åŒ–è¢«è¿æ¥å¯¹è±¡çš„å€¼è®¿é—®ã€‚
æ¯”å¦‚ï¼Œæ€è€ƒä¸€ä¸ªå­˜åœ¨åµŒå¥—ç»“æ„çš„å¯¹è±¡ objã€‚ä¸ä½¿ç”¨å¯é€‰é“¾çš„è¯ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªæ·±åº¦åµŒå¥—çš„å­å±æ€§æ—¶ï¼Œéœ€è¦éªŒè¯ä¹‹é—´çš„å¼•ç”¨ï¼Œä¾‹å¦‚ï¼š
let nestedProp = obj.first &amp;amp;&amp;amp; obj.first.second; ä¸ºäº†é¿å…æŠ¥é”™ï¼Œåœ¨è®¿é—®obj.first.secondä¹‹å‰ï¼Œè¦ä¿è¯ obj.first çš„å€¼æ—¢ä¸æ˜¯ nullï¼Œä¹Ÿä¸æ˜¯ undefinedã€‚å¦‚æœåªæ˜¯ç›´æ¥è®¿é—® obj.first.secondï¼Œè€Œä¸å¯¹ obj.first è¿›è¡Œæ ¡éªŒï¼Œåˆ™æœ‰å¯èƒ½æŠ›å‡ºé”™è¯¯ã€‚
æœ‰äº†å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰ï¼Œåœ¨è®¿é—® obj.first.second ä¹‹å‰ï¼Œä¸å†éœ€è¦æ˜ç¡®åœ°æ ¡éªŒ obj.first çš„çŠ¶æ€ï¼Œå†å¹¶ç”¨çŸ­è·¯è®¡ç®—è·å–æœ€ç»ˆç»“æœï¼š
let nestedProp = obj.first?.second; é€šè¿‡ä½¿ç”¨ ?. æ“ä½œç¬¦å–ä»£ . æ“ä½œç¬¦ï¼ŒJavaScript ä¼šåœ¨å°è¯•è®¿é—® obj.first.second ä¹‹å‰ï¼Œå…ˆéšå¼åœ°æ£€æŸ¥å¹¶ç¡®å®š obj.first æ—¢ä¸æ˜¯ null ä¹Ÿä¸æ˜¯ undefinedã€‚å¦‚æœobj.</description></item><item><title>åˆ›å»ºJavaScripté¡¹ç›®éœ€è¦ç”¨åˆ°çš„å·¥å…·åº“</title><link>https://chenkai.life/javascript/several-libraries-are-needed-to-create-javascript/</link><pubDate>Wed, 15 Sep 2021 14:00:43 +0800</pubDate><guid>https://chenkai.life/javascript/several-libraries-are-needed-to-create-javascript/</guid><description>åˆ›å»ºJavaScriptéœ€è¦ç”¨åˆ°çš„å‡ ä¸ªå·¥å…·åº“
eslint é…ç½®çš„ JavaScript è¯­æ³•è§„åˆ™å’Œä»£ç é£æ ¼çš„æ£€æŸ¥å·¥å…·ã€‚
yarn add -D eslint eslint-config-airbnb-base ./node_modules/.bin/eslint --init .eslintrc.js
{ extends: [ &amp;#39;airbnb-base&amp;#39;, ], } husky å½“æ‚¨æäº¤æˆ–æ¨é€æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥ lint æäº¤æ¶ˆæ¯ã€è¿è¡Œæµ‹è¯•ã€lint ä»£ç ç­‰ã€‚ Husky æ”¯æŒæ‰€æœ‰ Git é’©å­ã€‚
yarn add -D husky package.json
{ &amp;#34;scripts&amp;#34;: { &amp;#34;prepare&amp;#34;: &amp;#34;husky install&amp;#34;, } } commitlint å¼ºåˆ¶ç»Ÿä¸€commit messagesæäº¤è§„èŒƒ
yarn add -D @commitlint/cli @commitlint/config-conventional npx husky add .husky/commit-msg 'npx --no-install commitlint --edit &amp;quot;$1&amp;quot;' commitlint.config.js
module.exports = { extends: [&amp;#39;@commitlint/config-conventional&amp;#39;], }; lint-stage å¯¹æš‚å­˜çš„ git æ–‡ä»¶è¿è¡Œ linterï¼Œä¸è¦è®© ğŸ’© æºœè¿›ä½ çš„ä»£ç åº“ï¼</description></item><item><title>axiosæ ¸å¿ƒæºç è§£è¯»</title><link>https://chenkai.life/javascript/axios_analyse/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/axios_analyse/</guid><description>è½¬è½½è‡ªaxios æ ¸å¿ƒæºç è§£è¯»
ä»‹ç»axios ä¸€ç›´åœ¨ä½¿ç”¨axiosåº“ï¼Œåœ¨äº«å—å®ƒå¸¦æ¥çš„ä¾¿åˆ©çš„åŒæ—¶ï¼Œæ€»æ„Ÿè§‰ä¸è¯»è¯»å®ƒçš„æºç æœ‰ç‚¹å¯¹ä¸èµ·å®ƒï¼Œåˆšå¥½ç½‘ä¸Šä»‹ç»axiosæºç çš„æ–‡ç« è¾ƒå°‘ï¼Œæ‰€ä»¥å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œæƒå½“æŠ›ç –å¼•ç‰ã€‚
axiosæ˜¯åŒæ„çš„JavaScriptçš„å¼‚æ­¥è¯·æ±‚åº“ï¼Œå®ƒå¯ä»¥åœ¨æµè§ˆå™¨ç«¯å’ŒNodeJSç¯å¢ƒé‡Œä½¿ç”¨ã€‚
VueJSçš„ä½œè€…å°¤å¤§ä¹Ÿæ¨èè¿™ä¸ªå·¥å…·ï¼Œå®ƒé™¤äº†å¼‚æ­¥è¯·æ±‚ç½‘ç»œèµ„æºåŠŸèƒ½ï¼Œè¿˜æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š
æä¾›ä»£ç†åŠŸèƒ½ æä¾›äº†æ‹¦æˆªå™¨ï¼ˆç±»ä¼¼ä¸­é—´ä»¶ï¼‰ï¼Œå¯ä»¥æ³¨å†Œåœ¨è¯·æ±‚å‘å‡ºå»ä¹‹å‰å’Œæ”¶åˆ°å“åº”ä¹‹åçš„æ“ä½œ å¯ä»¥è·å–ä¸Šä¼ è¿›åº¦å’Œä¸‹è½½è¿›åº¦ æä¾›çš„adapteré€‰é¡¹å¯ä»¥æ¨¡æ‹Ÿå“åº”æ•°æ® è‡ªå®šä¹‰å¼•èµ·æŠ¥é”™çš„å“åº”ç èŒƒå›´ æä¾›äº†å–æ¶ˆè¯·æ±‚çš„åŠŸèƒ½ axiosçš„GitHubåœ°å€ã€‚
é‚£ä¹ˆï¼Œå®ƒæ˜¯æ€ä¹ˆåŠåˆ°çš„å‘¢ï¼Ÿ é¦–å…ˆè¯´è¯´ä¸ºä»€ä¹ˆå®ƒå¯ä»¥åœ¨æµè§ˆå™¨ç«¯å’ŒNodeJSç¯å¢ƒä¸­ä½¿ç”¨ åœ¨axiosä¸­ï¼Œä½¿ç”¨é€‚é…å™¨è®¾è®¡æ¨¡å¼æ¥å±è”½å¹³å°çš„å·®å¼‚æ€§ï¼Œè®©ä½¿ç”¨è€…å¯ä»¥åœ¨æµè§ˆå™¨ç«¯å’ŒNodeJSç¯å¢ƒä¸­ä½¿ç”¨åŒä¸€å¥—APIå‘èµ·httpè¯·æ±‚ã€‚
axiosçš„é»˜è®¤é…ç½®é‡Œçš„adapteræ˜¯é€šè¿‡getDefaultAdapter()æ–¹æ³•æ¥è·å–çš„ï¼Œå®ƒçš„é€»è¾‘å¦‚ä¸‹ï¼š
function getDefaultAdapter() { var adapter; // Only Node.JS has a process variable that is of [[Class]] process if (typeof process !== &amp;#39;undefined&amp;#39; &amp;amp;&amp;amp; Object.prototype.toString.call(process) === &amp;#39;[object process]&amp;#39;) { // For node use HTTP adapter adapter = require(&amp;#39;./adapters/http&amp;#39;); } else if (typeof XMLHttpRequest !</description></item><item><title>defineProperty</title><link>https://chenkai.life/javascript/js_defineproperty/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_defineproperty/</guid><description>Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚
Object.defineProperty(obj, prop, descriptor) obj:è¦åœ¨å…¶ä¸Šå®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚ prop:è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°ã€‚ descriptor:å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚ æè¿°ç¬¦å¯ä»¥æœ‰ä»¥ä¸‹å±æ€§ï¼š
configurableï¼šå½“ä¸”ä»…å½“è¯¥å±æ€§çš„ configurable ä¸º true æ—¶ï¼Œè¯¥å±æ€§æè¿°ç¬¦æ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼ŒåŒæ—¶è¯¥å±æ€§ä¹Ÿèƒ½ä»å¯¹åº”çš„å¯¹è±¡ä¸Šè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º false enumerableï¼š å½“ä¸”ä»…å½“è¯¥å±æ€§çš„enumerableä¸ºtrueæ—¶ï¼Œè¯¥å±æ€§æ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ï¼Œdefaultï¼šfalse valueï¼š è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JavaScript å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefined writableï¼š å½“ä¸”ä»…å½“è¯¥å±æ€§çš„writableä¸ºtrueæ—¶ï¼Œvalueæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚ getï¼š ä¸€ä¸ªç»™å±æ€§æä¾› getter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ getter åˆ™ä¸º undefinedã€‚å½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œæ–¹æ³•æ‰§è¡Œæ—¶æ²¡æœ‰å‚æ•°ä¼ å…¥ï¼Œä½†æ˜¯ä¼šä¼ å…¥thiså¯¹è±¡ï¼ˆç”±äºç»§æ‰¿å…³ç³»ï¼Œè¿™é‡Œçš„thiså¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰è¯¥å±æ€§çš„å¯¹è±¡ setï¼š ä¸€ä¸ªç»™å±æ€§æä¾› setter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚å½“å±æ€§å€¼ä¿®æ”¹æ—¶ï¼Œè§¦å‘æ‰§è¡Œè¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå³è¯¥å±æ€§æ–°çš„å‚æ•°å€¼ã€‚ @return:ä¼ é€’ç»™å‡½æ•°çš„å¯¹è±¡ã€‚
example // æ•°ç»„æ‹¦æˆª /** * * @param {array} data */ function observe(data) { if (!Array.isArray(data)) { return; } // å–å‡ºæ‰€æœ‰æ•°ç»„éå† data.forEach(function(val,index) { Object.defineProperty(data, index, { enumerable: true, // å¯æšä¸¾ configurable: false, // ä¸èƒ½å†define get: function() { return val; }, set: function(newVal) { console.</description></item><item><title>getå’Œset</title><link>https://chenkai.life/javascript/js_get_and_set/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_get_and_set/</guid><description>ä½ å¯ä»¥åœ¨æ”¯æŒæ·»åŠ æ–°å±æ€§çš„ä»»ä½•æ ‡å‡†çš„å†…ç½®å¯¹è±¡æˆ–ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡å†…å®šä¹‰getter(è®¿é—®æ–¹æ³•)å’Œsetter(è®¾ç½®æ–¹æ³•)ã€‚ä½¿ç”¨å¯¹è±¡å­—é¢é‡è¯­æ³•å®šä¹‰getterså’Œsettersæ–¹æ³•ã€‚
get getè¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°æŸ¥è¯¢è¯¥å±æ€§æ—¶å°†è¢«è°ƒç”¨çš„å‡½æ•°,æœ‰æ—¶éœ€è¦å…è®¸è®¿é—®è¿”å›åŠ¨æ€è®¡ç®—å€¼çš„å±æ€§ï¼Œæˆ–è€…ä½ å¯èƒ½éœ€è¦åæ˜ å†…éƒ¨å˜é‡çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ˜¾å¼æ–¹æ³•è°ƒç”¨ã€‚åœ¨JavaScriptä¸­ï¼Œå¯ä»¥ä½¿ç”¨ getter æ¥å®ç°ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ getter å’Œ setter æ¥åˆ›å»ºä¸€ä¸ªä¼ªå±æ€§ç±»å‹ï¼Œä½†æ˜¯ä¸å¯èƒ½åŒæ—¶å°†ä¸€ä¸ª getter ç»‘å®šåˆ°ä¸€ä¸ªå±æ€§å¹¶ä¸”è¯¥å±æ€§å®é™…ä¸Šå…·æœ‰ä¸€ä¸ªå€¼
ä½¿ç”¨getè¯­æ³•æ—¶åº”æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š
å¯ä»¥ä½¿ç”¨æ•°å€¼æˆ–å­—ç¬¦ä¸²ä½œä¸ºæ ‡è¯†ï¼› å¿…é¡»ä¸å¸¦å‚æ•°ï¼› å®ƒä¸èƒ½ä¸å¦ä¸€ä¸ª get æˆ–å…·æœ‰ç›¸åŒå±æ€§çš„æ•°æ®æ¡ç›®åŒæ—¶å‡ºç°åœ¨ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ä¸­ï¼ˆä¸å…è®¸ä½¿ç”¨ { get x() { }, get x() { } } å’Œ { x: &amp;hellip;, get x() { } }ï¼‰ã€‚ å¯é€šè¿‡ delete æ“ä½œç¬¦åˆ é™¤ getterã€‚ åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªgetter è¿™ä¼šä¸ºobjåˆ›å»ºä¸€ä¸ªä¼ªå±æ€§latestï¼Œå®ƒä¼šè¿”å›logæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ,æ³¨æ„ï¼Œå°è¯•ä¸ºlateståˆ†é…ä¸€ä¸ªå€¼ä¸ä¼šæ”¹å˜å®ƒã€‚
var obj = { log: [&amp;#39;a&amp;#39;, &amp;#39;b&amp;#39;, &amp;#39;c&amp;#39;], get latest() { if (this.log.length == 0) { return undefined; } return this.</description></item><item><title>jsä¸­çš„this</title><link>https://chenkai.life/javascript/js_this/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_this/</guid><description>jsä¸­thisæŒ‡å½“å‰æ‰§è¡Œä»£ç çš„ç¯å¢ƒå¯¹è±¡ï¼Œthisä¸èƒ½åœ¨æ‰§è¡ŒæœŸé—´è¢«èµ‹å€¼å¦‚this = nullï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº†thisçš„å€¼
å…¨å±€ç¯å¢ƒ æµè§ˆå™¨ä¸­ï¼Œæ— è®ºæ˜¯å¦åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼ˆåœ¨ä»»ä½•å‡½æ•°ä½“å¤–éƒ¨ï¼‰this éƒ½æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚
// åœ¨æµè§ˆå™¨ä¸­, window å¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯å…¨å±€å¯¹è±¡ï¼š console.log(this === window); // true a = 37; console.log(window.a); // 37 this.b = &amp;#34;MDN&amp;#34;; console.log(window.b) // &amp;#34;MDN&amp;#34; console.log(b) // &amp;#34;MDN&amp;#34; nodeç¯å¢ƒä¸­thisæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡
console.log(this) // {} å‡½æ•°ï¼ˆè¿è¡Œå†…ï¼‰ç¯å¢ƒ åœ¨å‡½æ•°å†…éƒ¨ï¼Œthisçš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼
å› ä¸ºä¸‹é¢çš„ä»£ç ä¸åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸” this çš„å€¼ä¸æ˜¯ç”±è¯¥è°ƒç”¨è®¾ç½®çš„ï¼Œæ‰€ä»¥ this çš„å€¼é»˜è®¤æŒ‡å‘å…¨å±€å¯¹è±¡
function f1(){ return this; } //åœ¨æµè§ˆå™¨ä¸­ï¼š f1() === window; //åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯window //åœ¨Nodeä¸­ï¼š f1() === global; ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ this æ²¡æœ‰è¢«æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰å®šä¹‰ï¼Œé‚£å®ƒå°†ä¿æŒä¸º undefined
&amp;#34;use strict&amp;#34;; // è¿™é‡Œæ˜¯ä¸¥æ ¼æ¨¡å¼ function f2(){ return this; } f2() === undefined; // true window.</description></item><item><title>jsçš„Classçš„ç»§æ‰¿</title><link>https://chenkai.life/javascript/js_class/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_class/</guid><description>è½¬è½½è‡ªhttps://es6.ruanyifeng.com/#docs/class-extends
ç®€ä»‹ Class å¯ä»¥é€šè¿‡extendså…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè¿™æ¯” ES5 çš„é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚
class Point { } class ColorPoint extends Point { } ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªColorPointç±»ï¼Œè¯¥ç±»é€šè¿‡extendså…³é”®å­—ï¼Œç»§æ‰¿äº†Pointç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ä½†æ˜¯ç”±äºæ²¡æœ‰éƒ¨ç½²ä»»ä½•ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç±»å®Œå…¨ä¸€æ ·ï¼Œç­‰äºå¤åˆ¶äº†ä¸€ä¸ªPointç±»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨ColorPointå†…éƒ¨åŠ ä¸Šä»£ç ã€‚
class ColorPoint extends Point { constructor(x, y, color) { super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y) this.color = color; } toString() { return this.color + &amp;#39; &amp;#39; + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString() } } ä¸Šé¢ä»£ç ä¸­ï¼Œconstructoræ–¹æ³•å’ŒtoStringæ–¹æ³•ä¹‹ä¸­ï¼Œéƒ½å‡ºç°äº†superå…³é”®å­—ï¼Œå®ƒåœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„thiså¯¹è±¡ã€‚
å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„thiså¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚
class Point { /* ... */ } class ColorPoint extends Point { constructor() { } } let cp = new ColorPoint(); // ReferenceError ä¸Šé¢ä»£ç ä¸­ï¼ŒColorPointç»§æ‰¿äº†çˆ¶ç±»Pointï¼Œä½†æ˜¯å®ƒçš„æ„é€ å‡½æ•°æ²¡æœ‰è°ƒç”¨superæ–¹æ³•ï¼Œå¯¼è‡´æ–°å»ºå®ä¾‹æ—¶æŠ¥é”™ã€‚</description></item><item><title>jsçš„prototype</title><link>https://chenkai.life/javascript/js_prototype/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_prototype/</guid><description>ä»€ä¹ˆæ˜¯åŸå‹é“¾ é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯åŸå‹ï¼Œåœ¨javascriptä¸­ï¼Œå‡½æ•°å¯ä»¥æœ‰å±æ€§ã€‚ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§å«ä½œåŸå‹ï¼ˆprototypeï¼‰,æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€äº›å±æ€§åˆ°åŸå‹ä¸Šé¢,ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ new è¿ç®—ç¬¦æ¥åœ¨ç°åœ¨çš„è¿™ä¸ªåŸå‹åŸºç¡€ä¹‹ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªçš„å®ä¾‹ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º proto ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆprototype ï¼‰. å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚
å¦‚ä½•åˆ©ç”¨åŸå‹é“¾å®ç°ç»§æ‰¿ å‡è®¾è¿™é‡Œæœ‰ä¸¤ä¸ªç±»
// äº¤é€šå·¥å…· function Transportation(name){ this.name = name; // è¯¥å±æ€§æ²¡æœ‰å®šä¹‰åˆ°åŸå‹é“¾ä¸Š,å¯ä»¥é€šè¿‡Object.keysè·å– this.say = function(){ console.log(`Transportationï¼š ${this.name}æ˜¯äº¤é€šå·¥å…·`); } } Object.assign(Transportation.prototype,{ move : function (){ console.log(`Transportation: ${this.name}ä¼šç§»åŠ¨`); }, }); // æ±½è½¦ function Car(name){ // è°ƒç”¨Transportationæ„é€ å‡½æ•°ï¼Œç»‘å®šthiså˜é‡ æˆ‘ä»¬ä¹Ÿå¯ä»¥ // this.name = name; Transportation.call(this, name); } æ­¤æ—¶Carçš„åŸå‹æ˜¯
new Car() ----&amp;gt; Car.prototype ----&amp;gt; Object.prototype ----&amp;gt; null è¦å®ç°ç»§æ‰¿æˆ‘ä»¬éœ€è¦å°†è¯¥å¯¹è±¡çš„åŸå‹æŒ‡å‘è¦ç»§æ‰¿å¯¹è±¡çš„åŸå‹ï¼Œå¦‚
new Car() ----&amp;gt; Car.</description></item><item><title>jsçš„è¿­ä»£å™¨</title><link>https://chenkai.life/javascript/js_iterator/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_iterator/</guid><description>ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ ECMAScript 2015çš„å‡ ä¸ªè¡¥å……ï¼Œå¹¶ä¸æ˜¯æ–°çš„å†…ç½®å®ç°æˆ–è¯­æ³•ï¼Œè€Œæ˜¯åè®®ã€‚è¿™äº›åè®®å¯ä»¥è¢«ä»»ä½•éµå¾ªæŸäº›çº¦å®šçš„å¯¹è±¡æ¥å®ç°ã€‚æœ‰ä¸¤ä¸ªåè®®ï¼šå¯è¿­ä»£åè®®å’Œè¿­ä»£å™¨åè®®ã€‚ JavaScript æä¾›äº†è®¸å¤šè¿­ä»£é›†åˆçš„æ–¹æ³•ï¼Œä»ç®€å•çš„ for å¾ªç¯åˆ° map() å’Œ filter()ï¼Œè¿­ä»£å™¨å’Œç”Ÿæˆå™¨å°†è¿­ä»£çš„æ¦‚å¿µç›´æ¥å¸¦å…¥æ ¸å¿ƒè¯­è¨€ï¼Œå¹¶æä¾›äº†ä¸€ç§æœºåˆ¶æ¥è‡ªå®šä¹‰ for&amp;hellip;of å¾ªç¯çš„è¡Œä¸º
var myIterator = { next: function() { // ... }, [Symbol.iterator]: function() { return this } } å¯è¿­ä»£åè®® ä¸ºäº†å˜æˆå¯è¿­ä»£å¯¹è±¡ï¼Œ ä¸€ä¸ªå¯¹è±¡å¿…é¡»å®ç° @@iterator æ–¹æ³•, æ„æ€æ˜¯è¿™ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å®ƒåŸå‹é“¾ prototype chain ä¸Šçš„æŸä¸ªå¯¹è±¡ï¼‰å¿…é¡»æœ‰ä¸€ä¸ªåå­—æ˜¯ Symbol.iterator çš„å±æ€§:
[Symbol.iterator] è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ— å‚å‡½æ•°ï¼Œè¢«è¿”å›å¯¹è±¡ç¬¦åˆè¿­ä»£å™¨åè®®ã€‚
å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦è¢«è¿­ä»£çš„æ—¶å€™ï¼ˆæ¯”å¦‚å¼€å§‹ç”¨äºä¸€ä¸ªfor..ofå¾ªç¯ä¸­ï¼‰ï¼Œå®ƒçš„@@iteratoræ–¹æ³•è¢«è°ƒç”¨å¹¶ä¸”æ— å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”¨äºåœ¨è¿­ä»£ä¸­è·å¾—å€¼çš„è¿­ä»£å™¨ã€‚
class people{ constructor(index){ this.index = index; } next(){ this.index++; return{ done: this.index &amp;gt; 10, value: this.index } } [Symbol.</description></item><item><title>jsèŠèŠJSçš„äºŒè¿›åˆ¶å®¶æ—ï¼šBlobã€ArrayBufferå’ŒBuffer</title><link>https://chenkai.life/javascript/js_binary_blob_arraybuffer_buffer/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_binary_blob_arraybuffer_buffer/</guid><description>è½¬è½½è‡ªçŸ¥ä¹-å¤–å©†çš„å½­æ¹–æ¹¾
å‰ç«¯è¾ƒå°‘æ¶‰åŠå¯¹äºŒè¿›åˆ¶æ•°æ®çš„å¤„ç†ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬å¶å°”æ€»èƒ½åœ¨è§’è½é‡Œçœ‹è§å®ƒä»¬çš„èº«å½±ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥èŠä¸€èŠJSçš„äºŒè¿›åˆ¶å®¶æ—ï¼šBlobã€ArrayBufferå’ŒBufferï¼ˆBufferç”±Node.jsæä¾›ï¼‰
æ¦‚è¿° Blob: å‰ç«¯çš„ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¯æŒæ–‡ä»¶æ“ä½œçš„äºŒè¿›åˆ¶å¯¹è±¡ ArrayBufferï¼šå‰ç«¯çš„ä¸€ä¸ªé€šç”¨çš„äºŒè¿›åˆ¶ç¼“å†²åŒºï¼Œç±»ä¼¼æ•°ç»„ï¼Œä½†åœ¨APIå’Œç‰¹æ€§ä¸Šå´æœ‰è¯¸å¤šä¸åŒ Bufferï¼šNode.jsæä¾›çš„ä¸€ä¸ªäºŒè¿›åˆ¶ç¼“å†²åŒºï¼Œå¸¸ç”¨æ¥å¤„ç†I/Oæ“ä½œ è¿™ç¯‡æ–‡ç« çš„å†…å®¹ä¸»è¦å°±èŠä¸€èŠè¿™ä¸€å®¶å­çš„äººé™…å…³ç³»å±•å¼€ã€‚
å¤æ‚çš„äººé™…å…³ç³»ç½‘.jpg
ä¸‹é¢å°±æ¥ä¸€ä¸€ä»‹ç»
Blob æˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»Blobï¼ŒBlobæ˜¯ç”¨æ¥æ”¯æŒæ–‡ä»¶æ“ä½œçš„ã€‚ç®€å•çš„è¯´ï¼šåœ¨JSä¸­ï¼Œæœ‰ä¸¤ä¸ªæ„é€ å‡½æ•° File å’Œ Blob, è€ŒFileç»§æ‰¿äº†æ‰€æœ‰Blobçš„å±æ€§ã€‚
æ‰€ä»¥åœ¨æˆ‘ä»¬çœ‹æ¥ï¼ŒFileå¯¹è±¡å¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„Blobå¯¹è±¡ã€‚
åœ¨å‰ç«¯å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å“ªäº›æ“ä½œä¸­å¯ä»¥è·å¾—Fileå¯¹è±¡å‘¢ï¼Ÿ è¯·çœ‹ï¼š
ï¼ˆå¤‡æ³¨ï¼šç›®å‰ File APIè§„èŒƒçš„çŠ¶æ€ä¸ºWorking Draftï¼‰
æˆ‘ä»¬ä¸Šé¢è¯´äº†ï¼ŒFileå¯¹è±¡æ˜¯ä¸€ç§ç‰¹æ®Šçš„Blobå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒè‡ªç„¶å°±å¯ä»¥ç›´æ¥è°ƒç”¨Blobå¯¹è±¡çš„æ–¹æ³•ã€‚è®©æˆ‘ä»¬çœ‹ä¸€çœ‹Blobå…·ä½“æœ‰å“ªäº›æ–¹æ³•ï¼Œä»¥åŠèƒ½å¤Ÿç”¨å®ƒä»¬å®ç°å“ªäº›åŠŸèƒ½
Blobå®æˆ˜ é€šè¿‡window.URL.createObjectURLæ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªblobè½¬åŒ–ä¸ºä¸€ä¸ªBlob URLï¼Œå¹¶ä¸”ç”¨åšæ–‡ä»¶ä¸‹è½½æˆ–è€…å›¾ç‰‡æ˜¾ç¤ºçš„é“¾æ¥ã€‚
Blob URLæ‰€å®ç°çš„ä¸‹è½½æˆ–è€…æ˜¾ç¤ºç­‰åŠŸèƒ½ï¼Œä»…ä»…å¯ä»¥åœ¨å•ä¸ªæµè§ˆå™¨å†…éƒ¨è¿›è¡Œã€‚è€Œä¸èƒ½åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œå­˜å‚¨ï¼Œäº¦æˆ–è€…è¯´å®ƒæ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨çš„æ„ä¹‰ã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªBlobçš„ä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå¾ˆçŸ­
blob:d3958f5c-0777-0845-9dcf-2cb28783acaf å’Œå†—é•¿çš„Base64æ ¼å¼çš„Data URLç›¸æ¯”ï¼ŒBlob URLçš„é•¿åº¦æ˜¾ç„¶ä¸èƒ½å¤Ÿå­˜å‚¨è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å®ƒåªæ˜¯ç±»ä¼¼äºä¸€ä¸ªæµè§ˆå™¨å†…éƒ¨çš„â€œå¼•ç”¨â€œã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼ŒBlob URLæ˜¯ä¸€ä¸ªæµè§ˆå™¨è‡ªè¡Œåˆ¶å®šçš„ä¸€ä¸ªä¼ªåè®®
Blobå®ç°ä¸‹è½½æ–‡ä»¶
æˆ‘ä»¬å¯ä»¥é€šè¿‡window.URL.createObjectURLï¼Œæ¥æ”¶ä¸€ä¸ªBlobï¼ˆFileï¼‰å¯¹è±¡ï¼Œå°†å…¶è½¬åŒ–ä¸ºBlob URL,ç„¶åèµ‹ç»™ a.downloadå±æ€§ï¼Œç„¶ååœ¨é¡µé¢ä¸Šç‚¹å‡»è¿™ä¸ªé“¾æ¥å°±å¯ä»¥å®ç°ä¸‹è½½äº†
&amp;lt;!-- htmléƒ¨åˆ† --&amp;gt; &amp;lt;a id=&amp;#34;h&amp;#34;&amp;gt;ç‚¹æ­¤è¿›è¡Œä¸‹è½½&amp;lt;/a&amp;gt; &amp;lt;!-- jséƒ¨åˆ† --&amp;gt; &amp;lt;script&amp;gt; var blob = new Blob([&amp;#34;Hello World&amp;#34;]); var url = window.</description></item><item><title>Reflectå’ŒProxy</title><link>https://chenkai.life/javascript/js_reflect_and_proxy/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_reflect_and_proxy/</guid><description>Proxy Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚Proxy è¿™ä¸ªè¯çš„åŸæ„æ˜¯ä»£ç†ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œå¯ä»¥è¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚ ES6 åŸç”Ÿæä¾› Proxy æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Proxy å®ä¾‹ã€‚var proxy = new Proxy(target, handler); Proxy å¯¹è±¡çš„æ‰€æœ‰ç”¨æ³•ï¼Œéƒ½æ˜¯ä¸Šé¢è¿™ç§å½¢å¼ï¼Œä¸åŒçš„åªæ˜¯handlerå‚æ•°çš„å†™æ³•ã€‚å…¶ä¸­ï¼Œ
new Proxy()è¡¨ç¤ºç”Ÿæˆä¸€ä¸ªProxyå®ä¾‹ï¼Œ targetå‚æ•°è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡ï¼Œ handlerå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºã€‚ var proxy = new Proxy({}, { get: function(target, property) { return 35; } }); proxy.time // 35 proxy.name // 35 proxy.title // 35 ä¸Šé¢ä»£ç ä¸­ï¼Œä½œä¸ºæ„é€ å‡½æ•°ï¼ŒProxyæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ï¼Œå³å¦‚æœæ²¡æœ‰Proxyçš„ä»‹å…¥ï¼Œæ“ä½œåŸæ¥è¦è®¿é—®çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¢«ä»£ç†çš„æ“ä½œï¼Œéœ€è¦æä¾›ä¸€ä¸ªå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ‹¦æˆªå¯¹åº”çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œé…ç½®å¯¹è±¡æœ‰ä¸€ä¸ªgetæ–¹æ³•ï¼Œç”¨æ¥æ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡å±æ€§çš„è®¿é—®è¯·æ±‚ã€‚getæ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç›®æ ‡å¯¹è±¡å’Œæ‰€è¦è®¿é—®çš„å±æ€§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæ‹¦æˆªå‡½æ•°æ€»æ˜¯è¿”å›35ï¼Œæ‰€ä»¥è®¿é—®ä»»ä½•å±æ€§éƒ½å¾—åˆ°35ã€‚ æ³¨æ„ï¼Œè¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹ï¼ˆä¸Šä¾‹æ˜¯proxyå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ç©ºå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œã€‚
å¦‚æœhandleræ²¡æœ‰è®¾ç½®ä»»ä½•æ‹¦æˆªï¼Œé‚£å°±ç­‰åŒäºç›´æ¥é€šå‘åŸå¯¹è±¡ã€‚
let peo = {}; let proxyP = new Proxy(peo,{}); proxyP.name = &amp;#39;ck&amp;#39;; peo.name //&amp;#39;ck&amp;#39; ä¸‹é¢æ˜¯ Proxy æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€è§ˆï¼Œä¸€å…± 13 ç§ã€‚</description></item><item><title>WebWorker</title><link>https://chenkai.life/web/web-worker/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/web/web-worker/</guid><description>ä¸€ã€æ¦‚è¿° JavaScript è¯­è¨€é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰ä»»åŠ¡åªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šå®Œæˆï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ã€‚å‰é¢çš„ä»»åŠ¡æ²¡åšå®Œï¼Œåé¢çš„ä»»åŠ¡åªèƒ½ç­‰ç€ã€‚éšç€ç”µè„‘è®¡ç®—èƒ½åŠ›çš„å¢å¼ºï¼Œå°¤å…¶æ˜¯å¤šæ ¸ CPU çš„å‡ºç°ï¼Œå•çº¿ç¨‹å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ï¼Œæ— æ³•å……åˆ†å‘æŒ¥è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›ã€‚
Web Worker çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸º JavaScript åˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸ä¸»çº¿ç¨‹åˆ›å»º Worker çº¿ç¨‹ï¼Œå°†ä¸€äº›ä»»åŠ¡åˆ†é…ç»™åè€…è¿è¡Œã€‚åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„åŒæ—¶ï¼ŒWorker çº¿ç¨‹åœ¨åå°è¿è¡Œï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ã€‚ç­‰åˆ° Worker çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡ï¼Œå†æŠŠç»“æœè¿”å›ç»™ä¸»çº¿ç¨‹ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä¸€äº›è®¡ç®—å¯†é›†å‹æˆ–é«˜å»¶è¿Ÿçš„ä»»åŠ¡ï¼Œè¢« Worker çº¿ç¨‹è´Ÿæ‹…äº†ï¼Œä¸»çº¿ç¨‹ï¼ˆé€šå¸¸è´Ÿè´£ UI äº¤äº’ï¼‰å°±ä¼šå¾ˆæµç•…ï¼Œä¸ä¼šè¢«é˜»å¡æˆ–æ‹–æ…¢ã€‚
Worker çº¿ç¨‹ä¸€æ—¦æ–°å»ºæˆåŠŸï¼Œå°±ä¼šå§‹ç»ˆè¿è¡Œï¼Œä¸ä¼šè¢«ä¸»çº¿ç¨‹ä¸Šçš„æ´»åŠ¨ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€æäº¤è¡¨å•ï¼‰æ‰“æ–­ã€‚è¿™æ ·æœ‰åˆ©äºéšæ—¶å“åº”ä¸»çº¿ç¨‹çš„é€šä¿¡ã€‚ä½†æ˜¯ï¼Œè¿™ä¹Ÿé€ æˆäº† Worker æ¯”è¾ƒè€—è´¹èµ„æºï¼Œä¸åº”è¯¥è¿‡åº¦ä½¿ç”¨ï¼Œè€Œä¸”ä¸€æ—¦ä½¿ç”¨å®Œæ¯•ï¼Œå°±åº”è¯¥å…³é—­ã€‚
Web Worker æœ‰ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚
ï¼ˆ1ï¼‰åŒæºé™åˆ¶
åˆ†é…ç»™ Worker çº¿ç¨‹è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¿…é¡»ä¸ä¸»çº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶åŒæºã€‚
ï¼ˆ2ï¼‰DOM é™åˆ¶
Worker çº¿ç¨‹æ‰€åœ¨çš„å…¨å±€å¯¹è±¡ï¼Œä¸ä¸»çº¿ç¨‹ä¸ä¸€æ ·ï¼Œæ— æ³•è¯»å–ä¸»çº¿ç¨‹æ‰€åœ¨ç½‘é¡µçš„ DOM å¯¹è±¡ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨documentã€windowã€parentè¿™äº›å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒWorker çº¿ç¨‹å¯ä»¥navigatorå¯¹è±¡å’Œlocationå¯¹è±¡ã€‚
ï¼ˆ3ï¼‰é€šä¿¡è”ç³»
Worker çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå®ƒä»¬ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡æ¶ˆæ¯å®Œæˆã€‚
ï¼ˆ4ï¼‰è„šæœ¬é™åˆ¶
Worker çº¿ç¨‹ä¸èƒ½æ‰§è¡Œalert()æ–¹æ³•å’Œconfirm()æ–¹æ³•ï¼Œä½†å¯ä»¥ä½¿ç”¨ XMLHttpRequest å¯¹è±¡å‘å‡º AJAX è¯·æ±‚ã€‚
ï¼ˆ5ï¼‰æ–‡ä»¶é™åˆ¶
Worker çº¿ç¨‹æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå³ä¸èƒ½æ‰“å¼€æœ¬æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆfile://ï¼‰ï¼Œå®ƒæ‰€åŠ è½½çš„è„šæœ¬ï¼Œå¿…é¡»æ¥è‡ªç½‘ç»œã€‚
äºŒã€åŸºæœ¬ç”¨æ³• 2.1 ä¸»çº¿ç¨‹ ä¸»çº¿ç¨‹é‡‡ç”¨newå‘½ä»¤ï¼Œè°ƒç”¨Worker()æ„é€ å‡½æ•°ï¼Œæ–°å»ºä¸€ä¸ª Worker çº¿ç¨‹ã€‚
var worker = new Worker(&amp;#39;work.js&amp;#39;); Worker()æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ Worker çº¿ç¨‹æ‰€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ç”±äº Worker ä¸èƒ½è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªè„šæœ¬å¿…é¡»æ¥è‡ªç½‘ç»œã€‚å¦‚æœä¸‹è½½æ²¡æœ‰æˆåŠŸï¼ˆæ¯”å¦‚404é”™è¯¯ï¼‰ï¼ŒWorker å°±ä¼šé»˜é»˜åœ°å¤±è´¥ã€‚</description></item><item><title>ä¸€ä¸ªå…³äºPromiseçš„é—®é¢˜</title><link>https://chenkai.life/posts/one_question_about_promise/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/posts/one_question_about_promise/</guid><description>ä¸€é“é¢˜å¸¦æ¥çš„ç–‘é—® æ˜é‡‘ä¸Šçš„ä¸€é“é¢˜ï¼š JSå®ç°ä¸€ä¸ªå¸¦å¹¶å‘é™åˆ¶çš„å¼‚æ­¥è°ƒåº¦å™¨Schedulerï¼Œä¿è¯åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æœ€å¤šæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªè§£æ³•å¦‚ä¸‹ï¼š
const timeout = (time) =&amp;gt; new Promise(resolve =&amp;gt; { setTimeout(resolve, time) }); class Scheduler { constructor() { this.awaitArr = []; this.count = 0; } async add(promiseCreator) { if (this.count &amp;gt;= 2) { await new Promise(resolve =&amp;gt; { this.awaitArr.push(resolve); }); } this.count++; const res = await promiseCreator(); this.count--; if (this.awaitArr.length) { this.awaitArr.shift()(); } return res; } } const scheduler = new Scheduler() const addTask = (time, order) =&amp;gt; { scheduler.</description></item><item><title>äº†è§£ä»€ä¹ˆæ˜¯polyfill</title><link>https://chenkai.life/javascript/polyfill/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/polyfill/</guid><description>ä»€ä¹ˆæ˜¯polyfill åˆæ¬¡äº†è§£polyfillè¿™ä¸ªè¯,æ˜¯åœ¨ä¸€æ¬¡é¢è¯•ä¸­ï¼Œé¢˜ç›®æ˜¯ä½¿ç”¨æ•°ç»„çš„reduseæ–¹å¼å®ç°mapæ–¹æ³•ï¼Œå…¨ä¸–ç•Œä½¿ç”¨ç€è®¸å¤šä¸åŒçš„æµè§ˆå™¨å’Œç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œæ¯ä¸ªæµè§ˆå™¨éƒ½å…·æœ‰ä¸å…¶ä»–æµè§ˆå™¨å®Œå…¨ä¸åŒçš„åŠŸèƒ½é›†ã€‚è¿™ä¼šä½¿æµè§ˆå™¨å¼€å‘æˆä¸ºä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ã€‚æµè¡Œæµè§ˆå™¨çš„æœ€æ–°ç‰ˆæœ¬å¯ä»¥å®Œæˆè®¸å¤šæ—§æµè§ˆå™¨æ— æ³•å®Œæˆçš„ä»»åŠ¡-ä½†æ‚¨å¯èƒ½ä»å¿…é¡»æ”¯æŒæ—§æµè§ˆå™¨ã€‚é€šè¿‡å°è¯•ä½¿ç”¨polyfillsé‡æ–°åˆ›å»ºç¼ºå°‘çš„åŠŸèƒ½ï¼ŒPolyfill.ioä½¿æ”¯æŒä¸åŒçš„æµè§ˆå™¨å˜å¾—æ›´ç®€å•ï¼šæ‚¨å¯ä»¥åœ¨æ”¯æŒæˆ–ä¸æ”¯æŒçš„æµè§ˆå™¨ä¸­åˆ©ç”¨æœ€æ–°å’Œæœ€å¼ºå¤§çš„åŠŸèƒ½ã€‚
å¦‚vueä¸­å¯¹bindçš„polyfillä»£ç å¦‚ä¸‹
function polyfillBind (fn, ctx) { function boundFn (a) { var l = arguments.length; return l ? l &amp;gt; 1 ? fn.apply(ctx, arguments) : fn.call(ctx, a) : fn.call(ctx) } boundFn._length = fn.length; return boundFn } function nativeBind (fn, ctx) { return fn.bind(ctx) } var bind = Function.prototype.bind ? nativeBind : polyfillBind; å¸¸ç”¨å¯¹polyfillæ–¹æ³• babel-polyfill æä¾›å®Œæ•´çš„ES2015+ç¯å¢ƒ
polyfill.io polyfill.ioå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ¥å—ä¸€ç»„æµè§ˆå™¨åŠŸèƒ½çš„è¯·æ±‚ï¼Œå¹¶ä»…è¿”å›è¯·æ±‚æµè§ˆå™¨æ‰€éœ€çš„polyfill</description></item><item><title>ä»‹ç»å‡ ä¸ªè¡¨è¾¾å¼å’Œè¿ç®—ç¬¦</title><link>https://chenkai.life/javascript/js_operator/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_operator/</guid><description>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ ??æ˜¯ä¸€ä¸ªé€»è¾‘æ“ä½œç¬¦ï¼Œå½“å·¦ä¾§çš„è¡¨è¾¾å¼ç»“æœä¸º nullæˆ–è€… undefinedæ—¶ï¼Œå…¶è¿”å›å³ä¾§è¡¨è¾¾å¼çš„ç»“æœï¼Œå¦åˆ™è¿”å›å·¦ä¾§è¡¨è¾¾å¼çš„ç»“æœã€‚
ä»¥å‰ï¼Œå¦‚æœæƒ³ä¸ºä¸€ä¸ªå˜é‡èµ‹é»˜è®¤å€¼ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨é€»è¾‘æˆ–æ“ä½œç¬¦|| ç„¶è€Œï¼Œç”±äº || æ˜¯ä¸€ä¸ªå¸ƒå°”é€»è¾‘è¿ç®—ç¬¦ï¼Œå·¦ä¾§çš„æ“ä½œæ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆå¸ƒå°”å€¼ç”¨äºæ±‚å€¼ã€‚ä»»ä½•å‡å€¼ï¼ˆ0ï¼Œ ''ï¼Œ NaNï¼Œ nullï¼Œ undefinedï¼‰éƒ½ä¸ä¼šè¢«è¿”å›ã€‚è¿™å¯¼è‡´å¦‚æœä½ ä½¿ç”¨0ï¼Œ''æˆ–NaNä½œä¸ºæœ‰æ•ˆå€¼ï¼Œå°±ä¼šå‡ºç°ä¸å¯é¢„æ–™çš„åæœã€‚ç©ºå€¼åˆå¹¶æ“ä½œç¬¦å¯ä»¥é¿å…è¿™ç§é™·é˜±ï¼Œå…¶åªåœ¨ç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸ºnull æˆ– undefined æ—¶ï¼ˆè€Œä¸æ˜¯å…¶å®ƒå‡å€¼ï¼‰è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°
let myText = &amp;#39;&amp;#39;; // An empty string (which is also a falsy value) let notFalsyText = myText || &amp;#39;Hello world&amp;#39;; console.log(notFalsyText); // Hello world let preservingFalsy = myText ?? &amp;#39;Hi neighborhood&amp;#39;; console.log(preservingFalsy); // &amp;#39;&amp;#39; (as myText is neither undefined nor null) //å› ä¸ºç©ºå€¼åˆå¹¶æ“ä½œç¬¦å’Œå…¶ä»–é€»è¾‘æ“ä½œç¬¦ä¹‹é—´çš„è¿ç®—ä¼˜å…ˆçº§/è¿ç®—é¡ºåºæ˜¯æœªå®šä¹‰çš„ null || undefined ?? &amp;#34;foo&amp;#34;; // æŠ›å‡º SyntaxError (null || undefined ) ?</description></item><item><title>å±•å¼€è¯­æ³•å’Œå‰©ä½™å‚æ•°</title><link>https://chenkai.life/javascript/js_spread_and_rest/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/javascript/js_spread_and_rest/</guid><description>å±•å¼€è¯­æ³• å±•å¼€è¯­æ³•(Spread syntax),åªèƒ½ç”¨äºå¯è¿­ä»£å¯¹è±¡, å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨/æ•°ç»„æ„é€ æ—¶, å°†æ•°ç»„è¡¨è¾¾å¼æˆ–è€…stringåœ¨è¯­æ³•å±‚é¢å±•å¼€ï¼›è¿˜å¯ä»¥åœ¨æ„é€ å­—é¢é‡å¯¹è±¡æ—¶, å°†å¯¹è±¡è¡¨è¾¾å¼æŒ‰key-valueçš„æ–¹å¼å±•å¼€
a={name: &amp;#34;mdn&amp;#34;} b=[1,2,3] console.log({...a}) console.log([...b]) //å‡½æ•°å‚æ•° function sum(x, y, z) { return x + y + z; } const numbers = [1, 2, 3]; console.log(sum(...numbers)); console.log(sum.apply(null, numbers)); //æ„é€  var parts = [&amp;#39;shoulders&amp;#39;, &amp;#39;knees&amp;#39;]; var lyrics = [&amp;#39;head&amp;#39;, ...parts, &amp;#39;and&amp;#39;, &amp;#39;toes&amp;#39;]; // [&amp;#34;head&amp;#34;, &amp;#34;shoulders&amp;#34;, &amp;#34;knees&amp;#34;, &amp;#34;and&amp;#34;, &amp;#34;toes&amp;#34;] var obj1 = { foo: &amp;#39;bar&amp;#39;, x: 42 }; var obj2 = { foo: &amp;#39;baz&amp;#39;, y: 13 }; var clonedObj = { .</description></item><item><title>æµè§ˆå™¨å¤„ç†cookie</title><link>https://chenkai.life/web/cookie/</link><pubDate>Fri, 09 Jul 2021 15:37:56 +0800</pubDate><guid>https://chenkai.life/web/cookie/</guid><description>è®¾ç½®cookie function setCookie(options) { const { name, data } = options; const age = options.age || 24 * 3600000; const domain = options.domain || window.location.hostname; document.cookie = `${name}=${data}; path=/; max-age=${age}; domain=${domain}`; } è·å–cookie function getCookie(cookie_name) { let value = null; let allcookies = document.cookie; let cookie_pos = allcookies.indexOf(cookie_name); if (cookie_pos != -1) { cookie_pos = cookie_pos + cookie_name.length + 1; let cookie_end = allcookies.indexOf(&amp;#34;;&amp;#34;, cookie_pos); if (cookie_end == -1) { cookie_end = allcookies.</description></item></channel></rss>